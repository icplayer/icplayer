(function(g){function a(a){return{isValid:!1,errorCode:a,value:void 0}}function b(a){return{isValid:!0,value:a,errorCode:""}}function d(a){return"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof nodelist?"function"==typeof a||!1:Object.prototype.toString.call(a)==="[object "+Function+"]"}function c(a){return"[object String]"===Object.prototype.toString.call(a)}function e(){this.validatedModel={}}function f(a){return function(c,e,i){d(e)&&(i=e,e={});void 0===e&&(e={});var f=function(d,
f){e&&e.isConfigurationGenerator&&(e=e.generate(this,f));if(i&&!i.call(this,f)){var h=b(void 0);h.validatedFieldName=c;return h}h=a.call(this,d,e);if(!h.isValid){h.fieldName=h.fieldName||[];h.fieldName=[c].concat(h.fieldName)}h.validatedFieldName=c;return h};f.fieldName=c;return f}}function i(a){this.isConfigurationGenerator=!0;this.generator=a}var j={validateBoolean:function(a){return"True"===a},validateInteger:function(a){var b={isValid:!1,value:NaN};if(j.isStringEmpty(a))return b;a=parseInt(a,
10);if(isNaN(a))return b;b.isValid=!0;b.value=a;return b},validatePositiveInteger:function(a){a=this.validateInteger(a);return!a.isValid?a:1>a.value?{isValid:!1}:a},validateIntegerInRange:function(a,b,c){a=this.validateInteger(a);if(!a.isValid)return a;c||(c=0);return a.value<c||a.value>b?{isValid:!1}:a},validateFloat:function(a,b){var c={isValid:!1,value:NaN,parsedValue:NaN};if(j.isStringEmpty(a))return c;var e=parseFloat(a);if(isNaN(e))return c;b||(b=2);c.isValid=!0;c.value=e.toFixed(b);c.parsedValue=
parseFloat(c.value);return c},validateFloatInRange:function(a,b,c,e){e||(e=2);a=this.validateFloat(a,e);if(!a.isValid)return a;c||(c=0);c=parseFloat(c.toFixed(e));b=parseFloat(b.toFixed(e));return a.value<c||a.value>b?{isValid:!1}:a},validateOption:function(a,b){for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&c===b)return a[c];return a[a.DEFAULT]},validateJSVariableName:function(a){return null===a.match(/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/)?{isValid:!1}:{isValid:!0}},validateColor:function(a,
b){b||(b="#FFFFFF");if(!a)return{isValid:!1,color:b};var c=a.match(/#[0-9a-fA-F]+/),e;return(e=(e=!c||null===c||1!=c.length)||7!=c[0].length)?{isValid:!1,color:b}:{isValid:!0,color:a}},isStringEmpty:function(a){return void 0===a||""===a},isHtmlEmpty:function(a){if(void 0===a)return!0;a=String(a);if(-1<a.indexOf("<img"))return!1;var b=document.createElement("div");b.innerHTML=a;a=b.textContent||b.innerText;return void 0===a||""===a.trim()?!0:!1},isStringWithPrefixEmpty:function(a,b){return j.isStringEmpty(a)?
!0:a===b},isArrayElementEmpty:function(a){if(!a)return!0;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)&&!j.isStringEmpty(a[b]))return!1;return!0},isArrayEmpty:function(a){return!a?!0:1===a.length&&j.isArrayElementEmpty(a[0])},removeDuplicatesFromArray:function(a){if(0===a.length)return[];for(var b=[],c=0;c<a.length-1;c++)a[c+1]!==a[c]&&b.push(a[c]);b.push(a[a.length-1]);return b},getErrorObject:function(a){return{isValid:!1,errorCode:a}}};e.prototype={validate:function(a,b){return this.validateModel(a,
b,!0)},validateModel:function(b,c,e){var d={},i;void 0===e&&(e=!1);for(var f=c.length,h=0;h<f;h+=1)if(i=c[h].fieldName,void 0!==b[i]&&null!==b[i]){i=c[h].call(this,b[i],d);var j=i.validatedFieldName;if(!i.isValid)return i;e&&(this.validatedModel[j]=i.value);d[j]=i.value}else return b=a("UMF01"),b.fieldName=[i],b;return{isValid:!0,value:d,errorCode:""}},generateErrorCode:a,generateValidValue:b,__validatorDecorator__:f};i.prototype.generate=function(a,b){return this.generator.call(a,b)};var h={DumbInteger:function(a){return this.generateValidValue(parseInt(a,
10))},DumbString:function(a){return this.generateValidValue(a)},Boolean:function(a){return!c(a)?this.generateErrorCode("BL01"):this.generateValidValue("True"===a)},Integer:function(a,b){if(!c(a))return this.generateErrorCode("INT05");var e=b.minValue,d=b.maxValue,i=b["default"],f=void 0!==b["default"];if(void 0===d||null===d)d=Number.MAX_VALUE;if(void 0===e||null===e)e=-1*Number.MAX_VALUE;a=a.trim();if(f&&""===a)return this.generateValidValue(i);if(""===a)return this.generateErrorCode("INT01");if(!/^[-]?[0-9]+$/.test(a))return this.generateErrorCode("INT02");
i=parseInt(a,10);return i>d?this.generateErrorCode("INT03"):i<e?this.generateErrorCode("INT04"):this.generateValidValue(i)},String:function(a,b){if(!c(a))return this.generateErrorCode("STR02");var e=void 0!==b["default"],d=b["default"],i=a;if(void 0===b.trim||b.trim)i=i.trim();return!e&&""===i?this.generateErrorCode("STR01"):e&&""===i?this.generateValidValue(d):this.generateValidValue(i)},CSSClass:function(a,b){if(!c(a))return this.generateErrorCode("CSS02");a=a.trim();return void 0!==b["default"]&&
""===a.trim()?this.generateValidValue(b["default"]):!/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(a)?this.generateErrorCode("CSS01"):this.generateValidValue(a)},List:function(a,b){var c=function(a){return"[object Array]"===Object.prototype.toString.call(a)};if(!(Array.isArray||c)(a))return this.generateErrorCode("ARR01");for(var c=[],e=0;e<a.length;e++){var d=this.validateModel(a[e],b);if(!d.isValid)return d;c.push(d.value)}return this.generateValidValue(c)},HEXColor:function(a,b){if(!c(a))return this.generateErrorCode("RGB01");
var e=!0===b.canBeShort,d=b["default"],i=/^$/;if(7<a.length)return this.generateErrorCode("RGB02");if(void 0!==d&&""===a)return this.generateValidValue(d);i=e?/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/:/^#[0-9a-fA-F]{6}$/;return i.test(a)?this.generateValidValue(a):this.generateErrorCode("RGB03")},Enum:function(a,b){if(!c(a))return this.generateErrorCode("EV02");var e=b.values||[],d=b.useLowerCase||!1,i=b["default"],a=a.trim();d&&(a=a.toLowerCase());if(void 0!==i&&""===a)return this.generateValidValue(i);
for(d=0;d<e.length;d++)if(e[d].trim()===a)return this.generateValidValue(a);return this.generateErrorCode("EV01")},StaticList:function(a,b){var c={},e;for(e in b)if(b.hasOwnProperty(e)){if(void 0===a[e])return this.generateErrorCode("SL01");var d=this.validateModel(a[e],b[e]);if(!d.isValid)return d;c[e]=d.value}return this.generateValidValue(c)},utils:{FieldRename:function(a,b,e){if(!c(a))throw Error("First argument must be a string");if(!c(b))throw Error("New name must be a string");if(!d(e))throw Error("Next must be a function");
var i=function(a,c){var d=e.call(this,a,c);d.validatedFieldName=b;return d};i.fieldName=a;return i},EnumChangeValues:function(a,b,e){if(!d(e))throw Error("Next must be a function");if(!c(a))throw Error("First argument must be a string");var i=function(a,c){var d=e.call(this,a,c);d.isValid&&(b.hasOwnProperty(d.value)&&b[d.value])&&(d.value=b[d.value]);return d};i.fieldName=a;return i},FieldConfigGenerator:i}},l={},m;for(m in h)l[m]=d(h[m])?f(h[m]):h[m];g.ModelValidationUtils=j;g.ModelValidator=e;g.ModelValidators=
l})(window);(function(g){g.DOMOperationsUtils={getOuterDimensions:function(a){a=$(a);return{border:{top:parseInt(a.css("border-top-width"),10),bottom:parseInt(a.css("border-bottom-width"),10),left:parseInt(a.css("border-left-width"),10),right:parseInt(a.css("border-right-width"),10)},margin:{top:parseInt(a.css("margin-top"),10),bottom:parseInt(a.css("margin-bottom"),10),left:parseInt(a.css("margin-left"),10),right:parseInt(a.css("margin-right"),10)},padding:{top:parseInt(a.css("padding-top"),10),bottom:parseInt(a.css("padding-bottom"),
10),left:parseInt(a.css("padding-left"),10),right:parseInt(a.css("padding-right"),10)}}},calculateOuterDistances:function(a){var b=a.border.top+a.border.bottom,b=b+(a.margin.top+a.margin.bottom),b=b+(a.padding.top+a.padding.bottom),d=a.border.left+a.border.right,d=d+(a.margin.left+a.margin.right),d=d+(a.padding.left+a.padding.right);return{vertical:b,horizontal:d}},calculateReducedSize:function(a,b){var d=DOMOperationsUtils.getOuterDimensions(b),d=DOMOperationsUtils.calculateOuterDistances(d);return{width:$(a).width()-
d.horizontal,height:$(a).height()-d.vertical}},setReducedSize:function(a,b){var d=DOMOperationsUtils.calculateReducedSize(a,b);$(b).css({width:d.width+"px",height:d.height+"px"});return d},showErrorMessage:function(a,b,d){$(a).html(b[d])},getResourceFullPath:function(a,b){return!a||!b?void 0:a.getStaticFilesPath()+b}}})(window);(function(g){function a(b){this._actualState=a._internal.STATE.START;this.correctCSS=b.correct||"";this.wrongCSS=b.wrong||"";this.showAnswersCSS=b.showAnswers||"";this.blockCSS=b.block||"";this.droppableHoverCSS=b.droppableHover||""}a._internal={STATE:{START:0,BLOCK:1,WORK:2,CORRECT:3,WRONG:4,SHOW_ANSWERS:5},changeStateToStart:function(){this._actualState=a._internal.STATE.START},changeStateToBlock:function(){this._actualState=a._internal.STATE.BLOCK},changeStateToWork:function(){this._actualState=
a._internal.STATE.WORK},changeStateToCorrect:function(){this._actualState=a._internal.STATE.CORRECT},changeStateToWrong:function(){this._actualState=a._internal.STATE.WRONG},changeStateToShowAnswers:function(){this._actualState=a._internal.STATE.SHOW_ANSWERS},checkStartState:function(){this.onBlock();this.setCssOnBlock();a._internal.changeStateToBlock.call(this)},showAnswersStartState:function(){this.notifyEdit();a._internal.showAnswersWorkState.call(this)},resetStartState:function(){},uncheckBlockState:function(){this.onUnblock();
this.setCssOnUnblock();a._internal.changeStateToStart.call(this)},resetBlockState:function(){a._internal.uncheckBlockState.call(this)},showAnswersBlockState:function(){a._internal.uncheckBlockState.call(this);a._internal.showAnswersStartState.call(this)},resetWorkState:function(){this.onReset();a._internal.changeStateToStart.call(this)},checkWorkState:function(){this.isCorrect()?(this.setCssOnCorrect(),this.onCorrect(),a._internal.changeStateToCorrect.call(this)):(this.setCssOnWrong(),this.onWrong(),
a._internal.changeStateToWrong.call(this))},showAnswersWorkState:function(){this.onShowAnswers();this.setCssOnShowAnswers();a._internal.changeStateToShowAnswers.call(this)},resetShowAnswersState:function(){a._internal.hideAnswersShowAnswersState.call(this);a._internal.resetWorkState.call(this)},hideAnswersShowAnswersState:function(){this.setCssOnHideAnswers();this.onHideAnswers();a._internal.changeStateToWork.call(this)},checkShowAnswersState:function(){a._internal.hideAnswersShowAnswersState.call(this);
a._internal.checkWorkState.call(this)},uncheckCorrectState:function(){this.setCssOnUnCorrect();this.onUnCorrect();a._internal.changeStateToWork.call(this)},resetCorrectState:function(){a._internal.uncheckCorrectState.call(this);a._internal.resetWorkState.call(this)},showAnswersCorrectState:function(){a._internal.uncheckCorrectState.call(this);a._internal.showAnswersWorkState.call(this)},resetWrongState:function(){a._internal.uncheckWrongState.call(this);a._internal.resetWorkState.call(this)},uncheckWrongState:function(){this.setCssOnUnWrong();
this.onUnWrong();a._internal.changeStateToWork.call(this)},showAnswersWrongState:function(){a._internal.uncheckWrongState.call(this);a._internal.showAnswersWorkState.call(this)}};a.prototype.reset=function(){switch(this._actualState){case a._internal.STATE.START:a._internal.resetStartState.call(this);break;case a._internal.STATE.BLOCK:a._internal.resetBlockState.call(this);break;case a._internal.STATE.WORK:a._internal.resetWorkState.call(this);break;case a._internal.STATE.WRONG:a._internal.resetWrongState.call(this);
break;case a._internal.STATE.CORRECT:a._internal.resetCorrectState.call(this);break;case a._internal.STATE.SHOW_ANSWERS:a._internal.resetShowAnswersState.call(this)}};a.prototype.check=function(){switch(this._actualState){case a._internal.STATE.START:a._internal.checkStartState.call(this);break;case a._internal.STATE.BLOCK:a._internal.uncheckBlockState.call(this);break;case a._internal.STATE.WORK:a._internal.checkWorkState.call(this);break;case a._internal.STATE.WRONG:a._internal.uncheckWrongState.call(this);
break;case a._internal.STATE.CORRECT:a._internal.uncheckCorrectState.call(this);break;case a._internal.STATE.SHOW_ANSWERS:a._internal.checkShowAnswersState.call(this)}};a.prototype.showAnswers=function(){switch(this._actualState){case a._internal.STATE.START:a._internal.showAnswersStartState.call(this);break;case a._internal.STATE.BLOCK:a._internal.showAnswersBlockState.call(this);break;case a._internal.STATE.WORK:a._internal.showAnswersWorkState.call(this);break;case a._internal.STATE.WRONG:a._internal.showAnswersWrongState.call(this);
break;case a._internal.STATE.CORRECT:a._internal.showAnswersCorrectState.call(this)}};a.prototype.hideAnswers=function(){switch(this._actualState){case a._internal.STATE.SHOW_ANSWERS:a._internal.hideAnswersShowAnswersState.call(this)}};a.prototype.notifyEdit=function(){a._internal.changeStateToWork.call(this)};a.prototype.onReset=function(){throw Error("onReset is  abstract method.");};a.prototype.onBlock=function(){throw Error("onBlock is  abstract method.");};a.prototype.onUnblock=function(){throw Error("onUnblock is  abstract method.");
};a.prototype.isCorrect=function(){throw Error("isCorrect is  abstract method.");};a.prototype.onWrong=function(){throw Error("onWrong is  abstract method.");};a.prototype.onUnWrong=function(){throw Error("onUnWrong is  abstract method.");};a.prototype.onCorrect=function(){throw Error("onCorrect is  abstract method.");};a.prototype.onUnCorrect=function(){throw Error("onUnCorrect is  abstract method.");};a.prototype.onShowAnswers=function(){throw Error("onShowAnswers is  abstract method.");};a.prototype.onHideAnswers=
function(){throw Error("onHideAnswers is  abstract method.");};a.prototype.addCssClass=function(){throw Error("addCssClass is  abstract method.");};a.prototype.removeCssClass=function(){throw Error("removeCssClass is  abstract method.");};a.prototype.setCssOnCorrect=function(){this.addCssClass(this.correctCSS)};a.prototype.setCssOnWrong=function(){this.addCssClass(this.wrongCSS)};a.prototype.setCssOnShowAnswers=function(){this.addCssClass(this.showAnswersCSS)};a.prototype.setCssOnHideAnswers=function(){this.removeCssClass(this.showAnswersCSS)};
a.prototype.setCssOnUnCorrect=function(){this.removeCssClass(this.correctCSS)};a.prototype.setCssOnUnWrong=function(){this.removeCssClass(this.wrongCSS)};a.prototype.setCssOnBlock=function(){this.addCssClass(this.blockCSS)};a.prototype.setCssOnUnblock=function(){this.removeCssClass(this.blockCSS)};g.StatefullAddonObject=g.StatefullAddonObject||a})(window);(function(g){function a(a,b){this.message=a;this.name=b}function b(b,c,d,j){if(void 0===b[c])throw new a(d,j);return!0}function d(a,b,c,d){if(typeof a[b]!==d)throw new TypeError(c);return!0}function c(a,b){StatefullAddonObject.call(this,b);c._internal.validateConfiguration(a);this.addonID=a.addonID;this.objectID=a.objectID;this.source=a.source||"";this.value=a.value||"";this.showAnswersValue=a.showAnswersValue||"";this.type=a.type||"string";this.gapMaxLength=a.maxLength;this._isClickable=!0;this.droppedElement;
this.createView=a.createView||c.prototype.createView;this.connectEvents=a.connectEvents||c._internal.connectEvents;this.setValue=a.setValue||c.prototype.setValue;this.setViewValue=a.setViewValue||c.prototype.setViewValue;this.helper=a.helper||c.prototype.helper;this.makeGapEmpty=a.makeGapEmpty||c.prototype.makeGapEmpty;this.fillGap=a.fillGap||c.prototype.fillGap;this.cursorAt=a.cursorAt||c.prototype.cursorAt;this.getDroppedElement=c.prototype.getDroppedElement;this.eventBus=a.eventBus;this.getSelectedItem=
a.getSelectedItem;this.$view=this.createView.call(this);this.connectEvents(this)}c.prototype=Object.create(StatefullAddonObject.prototype);c.constructor=c;c._internal={validateConfiguration:function(a){b(a,"eventBus","EventBus attribute object is undefined in configuration object","UndefinedEventBusError");d(a,"eventBus","EventBus attribute should be a event bus object","function");b(a,"getSelectedItem","Get Selected Item function is undefined in configuration object","UndefinedGetSelectedItemError");
d(a,"getSelectedItem","Get Selected Item should be a function","function");b(a,"addonID","AddonID attribute is undefined in configuration object","UndefinedAddonIDError");d(a,"addonID","AddonID attribute should be a string type in configuration object","string");b(a,"objectID","objectID attribute is undefined in configuration object","UndefinedObjectIDError");d(a,"objectID","objectID attribute should be a string type in configuration object","string");void 0!==a.createView&&d(a,"createView","Create view have to be a function",
"function");void 0!==a.setValue&&d(a,"setValue","Set value have to be a function","function");void 0!==a.setViewValue&&d(a,"setViewValue","Set view value have to be a function","function");void 0!==a.makeGapEmpty&&d(a,"makeGapEmpty","Make gap empty have to be a function","function");void 0!==a.connectEvents&&d(a,"connectEvents","Fill gap have to be a function","function");void 0!==a.fillGap&&d(a,"fillGap","Fill gap have to be a function","function")},isSelectedItemEmpty:function(a){return"Empty"===
a.type},getSelectedItemWrapper:function(){return c._internal.validateSelectedItemData(this.getSelectedItem.call(this))},getClickHandler:function(){return function(a){this.stopPropagationAndPreventDefault(a);this.clickDispatcher(a)}.bind(this)},getDropHandler:function(){return function(a,b){this.stopPropagationAndPreventDefault(a);this.dropHandler(a,b);var c=b.helper[0];$(c).addClass("ic_sourceListItem-selected");this.droppedElement=c}.bind(this)},getStartDraggingHandler:function(){return function(a,
b){this.wrapperStartDraggingHandler(a,b)}.bind(this)},getStopDraggingHandler:function(){return function(a,b){this.wrapperStopDraggingHandler(a,b)}.bind(this)},validateSelectedItemData:function(a){if(null===a.value||null===a.item||void 0===a.type||void 0===a.value||void 0===a.item)a.type="Empty";return a},getDraggableEventsData:function(){return{source:this.addonID,item:this.source,value:this.value,type:"string"}},connectEvents:function(){this.bindClickHandler();this.bindDropHandler()}};c.prototype.setValue=
function(a){this.value=a};c.prototype.setViewValue=function(a){this.$view.html(a)};c.prototype.helper=function(){return function(){return $(this.droppedElement)}.bind(this)};c.prototype.makeGapEmpty=function(){this.notifyEdit();this.setValue.call(this,"");this.setViewValue.call(this,"");this.setSource.call(this,"");this.destroyDraggableProperty()};c.prototype.createView=function(){var a=$("<span></span>");a.attr("id",this.objectID);a.addClass("ui-draggable");a.addClass("ui-widget-content");return a};
c.prototype.fillGap=function(a){void 0!==a.value&&(this.notifyEdit(),this.setValue.call(this,a.value),this.setViewValue.call(this,a.value),this.setSource.call(this,a.item),this.sendItemConsumedEvent(),this.bindDraggableHandler())};c.prototype.cursorAt=function(){return{}};c.prototype.getValue=function(){return this.value};c.prototype.getView=function(){return this.$view};c.prototype.getAddonID=function(){return this.addonID};c.prototype.getObjectID=function(){return this.objectID};c.prototype.getGapMaxLength=
function(){return this.gapMaxLength};c.prototype.setGapMaxLength=function(a){this.gapMaxLength=a};c.prototype.getSource=function(){return this.source};c.prototype.getDroppedElement=function(){return $("<div>").append($(this.droppedElement).clone()).html()};c.prototype.setDroppedElement=function(a){this.droppedElement=a};c.prototype.setSource=function(a){this.source=a};c.prototype.addCssClass=function(a){this.$view.addClass(a)};c.prototype.removeCssClass=function(a){this.$view.removeClass(a)};c.prototype.bindClickHandler=
function(){this.$view.click(c._internal.getClickHandler.call(this))};c.prototype.bindDropHandler=function(){var a=!1;this.droppableHoverCSS&&0<this.droppableHoverCSS.length&&(a=this.droppableHoverCSS);this.$view.droppable({drop:c._internal.getDropHandler.call(this),hoverClass:a})};c.prototype.bindDraggableHandler=function(){this.$view.draggable({revert:!1,helper:this.helper(),cursorAt:this.cursorAt(),start:c._internal.getStartDraggingHandler.call(this),stop:c._internal.getStopDraggingHandler.call(this)})};
c.prototype.clickHandler=function(){var a=c._internal.getSelectedItemWrapper.call(this);if(!c._internal.isSelectedItemEmpty(a)){var b=a.item.substr(0,a.item.lastIndexOf("-")),b=$("#_icplayer").find("#"+b).children().filter(function(){return $(this).text()==a.value}),b=$(b[0]);b.css("display","inline-block");b.addClass("ic_sourceListItem-selected");this.droppedElement=$("<div>").append(b.clone()).html()}this.sendItemReturnedEvent();c._internal.isSelectedItemEmpty(a)?this.makeGapEmpty.call(this):this.fillGap.call(this,
a)};c.prototype.clickDispatcher=function(a){this._isClickable?this.clickHandler.call(this,a):this._isClickable=!0};c.prototype.dropHandler=function(a,b){this.setDroppedElement(b.draggable[0]);this.sendItemReturnedEvent();this.fillGap.call(this,c._internal.getSelectedItemWrapper.call(this))};c.prototype.startDraggingHandler=function(a,b){this.setViewValue.call(this,"");this.sendItemReturnedEvent();this.sendItemDraggedEvent();b.helper.zIndex(100);this.$view.removeClass("gapFilled")};c.prototype.wrapperStartDraggingHandler=
function(a,b){this._isClickable=!1;this.startDraggingHandler(a,b)};c.prototype.wrapperStopDraggingHandler=function(a,b){this._isClickable=!0;this.stopDraggingHandler(a,b)};c.prototype.stopDraggingHandler=function(a,b){b.helper[0].remove();this.sendItemStoppedEvent();this.makeGapEmpty.call(this)};c.prototype.destroyDraggableProperty=function(){this.$view.draggable("destroy")};c.prototype.stopPropagationAndPreventDefault=function(a){a.stopPropagation();a.preventDefault()};c.prototype.sendItemDraggedEvent=
function(){this.sendEvent("itemDragged",c._internal.getDraggableEventsData.call(this))};c.prototype.sendItemStoppedEvent=function(){this.sendEvent("itemStopped",c._internal.getDraggableEventsData.call(this))};c.prototype.sendItemReturnedEvent=function(){this.sendEvent("ItemReturned",c._internal.getDraggableEventsData.call(this))};c.prototype.sendItemConsumedEvent=function(){this.sendEvent("ItemConsumed",c._internal.getDraggableEventsData.call(this))};c.prototype.sendEvent=function(a,b){this.eventBus.sendEvent(a,
b)};c.prototype.lock=function(){this.$view.unbind("click");this.$view.draggable("disable");this.$view.droppable("disable")};c.prototype.unlock=function(){this.bindClickHandler();this.$view.draggable("enable");this.$view.droppable("enable")};c.prototype.onReset=function(){this.setValue.call(this,"");this.setViewValue.call(this,"");this.setSource.call(this,"");this.destroyDraggableProperty()};c.prototype.onBlock=function(){this.lock()};c.prototype.onUnblock=function(){this.unlock()};c.prototype.isCorrect=
function(){return this.value===this.showAnswersValue};c.prototype.onWrong=function(){this.lock()};c.prototype.onUnWrong=function(){this.unlock()};c.prototype.onCorrect=function(){this.lock()};c.prototype.onUnCorrect=function(){this.unlock()};c.prototype.onShowAnswers=function(){this.lock();this.setViewValue(this.showAnswersValue)};c.prototype.onHideAnswers=function(){this.unlock();this.setViewValue(this.value)};c.prototype.setState=function(a,b,c){this.setValue.call(this,a);this.setViewValue.call(this,
a);this.setSource.call(this,b);this.droppedElement=c;this.bindDraggableHandler();this.notifyEdit()};g.DraggableDroppableObject=g.DraggableDroppableObject||c})(window);(function(g){g.Serialization={serialize:function(a){if(a){var b="";$.each(a,function(a,c){var e=typeof c;if("object"===e&&$.isArray(c)){var e="array",f="";$.each(c,function(a){f+=this+"-"+typeof c[a]+","});c=f=f.slice(0,-1)}b+="["+a+":"+e+":"+c+"]"});return b}},deserialize:function(a){if(a){var b={};if(a=a.match(/[\w]+:[\w-]+:[\w,.\- ]+/g)){for(var d=0;d<a.length;d++){var c=a[d].split(":");b[c[0]]=this.convert(c[2],c[1])}return b}}},convert:function(a,b){if(a&&b)switch(b){case "string":return a;case "number":return this.isInteger(a)?
parseInt(a):parseFloat(a);case "boolean":return"true"==a;case "array":return this.convertArray(a);default:return"This type of value is unrecognized."}},convertArray:function(a){for(var a=a.split(","),b=[],d=0;d<a.length;d++){var c=a[d].split("-");b.push(this.convert(c[0].trim(),c[1]))}return b},isInteger:function(a){return 0===a%1&&null!=a}}})(window);(function(g){g.Watermark={defaultOptions:{size:100,opacity:1,color:"#000000"},validateOptions:function(a){if(!a)return $.extend({},this.defaultOptions);var b=$.extend({},a);ModelValidationUtils.validatePositiveInteger(a.size).isValid||(b.size=this.defaultOptions.size);ModelValidationUtils.validateFloatInRange(a.opacity,1,0,2).isValid||(b.opacity=this.defaultOptions.opacity);ModelValidationUtils.validateColor(a.color,this.defaultOptions.color).isValid||(b.color=this.defaultOptions.color);return b},
draw:function(a,b){var d=$(a),c=$(document.createElement("canvas"));d.html(c);b=this.validateOptions(b);c.attr({width:b.size,height:b.size});c.rotateCanvas({x:b.size/2,y:b.size/2,angle:90}).drawArc({strokeWidth:1,strokeStyle:b.color,fillStyle:b.color,x:b.size/2,y:b.size/2,radius:b.size/2-1,opacity:b.opacity}).drawLine({strokeWidth:1,strokeStyle:"#FFF",fillStyle:"#FFF",rounded:!0,x1:b.size/2,y1:0.17*b.size,x2:b.size-0.2*b.size,y2:b.size-0.33*b.size,x3:0.2*b.size,y3:b.size-0.33*b.size,x4:b.size/2,y4:0.17*
b.size,opacity:b.opacity})}}})(window);(function(g){g.Helpers={splitLines:function(a){return a.split(/[\n\r]+/)},alertErrorMessage:function(a,b){var d=b+"\n\n";a.name&&(d+="["+a.name+"] ");d+=a.message?a.message:a;alert(d)},uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})},timer:function(a){var b=performance.now?performance:Date;return function(){var d=b.now(),c=a(),d=b.now()-d;console.log("Function "+a.name+" took "+d+" ms");return c}}}})(window);
(function(g){if(!g.fn.style){var a=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(a){return this.getAttribute(a)},CSSStyleDeclaration.prototype.setProperty=function(b,d,c){this.setAttribute(b,d);c="undefined"!=typeof c?c:"";if(""!=c){var e=RegExp(a(b)+"\\s*:\\s*"+a(d)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(e,b+": "+d+" !"+c+";")}},CSSStyleDeclaration.prototype.removeProperty=
function(a){return this.removeAttribute(a)},CSSStyleDeclaration.prototype.getPropertyPriority=function(b){return RegExp(a(b)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""});g.fn.style=function(a,d,c){if(typeof this.get(0)=="undefined")return this;var e=this.get(0).style;if(typeof a!="undefined"){if(typeof d!="undefined"){e.setProperty(a,d,typeof c!="undefined"?c:"");return this}return e.getPropertyValue(a)}return e}}})(jQuery);(function(g){var a={};g.MobileUtils={isMobileUserAgent:function(a){return void 0===a||!a?!1:!(!a.match(/Android/i)&&!a.match(/BlackBerry/i)&&!a.match(/iPhone|iPad|iPod/i)&&!(a.match(/Mac/)&&g.navigator.maxTouchPoints&&2<g.navigator.maxTouchPoints||a.match(/IEMobile/i)||a.match(/Opera Mini/i)))},isAndroidWebBrowser:function(a){return void 0===a||!a?!1:a.indexOf("Mozilla/5.0">-1&&-1<a.indexOf("Android ")&&-1<a.indexOf("AppleWebKit"))&&!(-1<a.indexOf("Chrome"))},getAndroidVersion:function(a){if(void 0===
a||!a)return"";var a=a.toString(),d=a.indexOf("Android")+7;if(-1===d)return"";var c=a.indexOf(";",d);return a.substring(d,c).trim()},isSafariMobile:function(a){return void 0===a||!a?!1:!!(a.match(/iPhone|iPad|iPod/i)||a.match(/Mac/)&&g.navigator.maxTouchPoints&&2<g.navigator.maxTouchPoints)},isWindowsMobile:function(a){return void 0===a||!a?!1:a.msPointerEnabled?!0:!1},getAndroidVersion:function(a){a=a||navigator.userAgent;return(a=a.match(/Android\s([0-9\.]*)/))?a[1]:!1},isEventSupported:function(b){var d=
{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img",unload:"win",resize:"win",touchstart:"button"},c=b.replace(/^on/,"");if(a[c])return a[c];var d="win"==d[c]?g:document.createElement(d[c]||"div"),b="on"+c,e=b in d;e||(d.setAttribute(b,"return;"),e="function"==typeof d[b]);return a[c]=e}}})(window);(function(g){function a(a,d){this.isSelectEnabled=!0;this.keyboardNavigationActive=!1;this.keyboardNavigationElements=a;this.columnsCount=d;this.keyboardNavigationElementsLen=a.length;var f={};f[b.TAB]=this.nextElement;f[b.ENTER]=this.enter;f[b.ESCAPE]=this.escape;f[b.SPACE]=this.select;f[b.ARROW_LEFT]=this.previousElement;f[b.ARROW_UP]=this.previousRow;f[b.ARROW_RIGHT]=this.nextElement;f[b.ARROW_DOWN]=this.nextRow;var i={};i[b.TAB]=this.previousElement;i[b.ENTER]=this.exitWCAGMode;this.mapping=f;
this.shiftKeysMapping=i}var b={TAB:9,ENTER:13,ESCAPE:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40},d=null;a.prototype.handle=function(a,b,d){b?this.shiftKeysMapping[a]&&this.shiftKeysMapping[a].call(this,d):this.mapping[a]&&this.mapping[a].call(this,d)};a.prototype.setElements=function(a){for(var b=0;b<this.keyboardNavigationElementsLen;b++)this.unmark(this.keyboardNavigationElements[b]);this.keyboardNavigationElements=a;this.keyboardNavigationElementsLen=a.length;this.keyboardNavigationCurrentElementIndex=
0;this.keyboardNavigationActive&&(this.keyboardNavigationCurrentElement=this.keyboardNavigationElements[0],this.mark(this.keyboardNavigationCurrentElement))};a.prototype.getTarget=function(a){return a};a.prototype.mark=function(a){this.getTarget(a,!1).addClass("keyboard_navigation_active_element")};a.prototype.unmark=function(a){this.getTarget(a,!1).removeClass("keyboard_navigation_active_element")};a.prototype.markCurrentElement=function(a){this.keyboardNavigationCurrentElement&&this.unmark(this.keyboardNavigationCurrentElement);
this.keyboardNavigationCurrentElementIndex=a;this.keyboardNavigationCurrentElement=this.keyboardNavigationElements[a];this.mark(this.keyboardNavigationCurrentElement)};a.prototype.switchElement=function(a){a=this.keyboardNavigationCurrentElementIndex+a;a>=this.keyboardNavigationElementsLen?a-=this.keyboardNavigationElementsLen:0>a&&(a=this.keyboardNavigationElementsLen+a);this.markCurrentElement(a)};a.prototype.nextElement=function(a){a&&a.preventDefault();this.switchElement(1)};a.prototype.previousElement=
function(a){a&&a.preventDefault();this.switchElement(-1)};a.prototype.nextRow=function(a){a&&a.preventDefault();this.switchElement(this.columnsCount)};a.prototype.previousRow=function(a){a&&a.preventDefault();this.switchElement(-this.columnsCount)};a.prototype.enter=function(a){a&&a.preventDefault();this.keyboardNavigationActive||(this.keyboardNavigationActive=!0,this.markCurrentElement(0))};a.prototype.escape=function(a){a&&a.preventDefault();this.keyboardNavigationActive&&this.exitWCAGMode()};a.prototype.select=
function(a){a&&a.preventDefault();this.isSelectEnabled&&this.selectAction()};a.prototype.selectAction=function(){this.getTarget(this.keyboardNavigationCurrentElement,!0).click()};a.prototype.reload=function(a,b){this.isSelectEnabled=!0;this.keyboardNavigationElements=a;this.columnsCount=b;this.keyboardNavigationElementsLen=a.length;this.keyboardNavigationActive&&this.enter()};a.prototype.selectEnabled=function(a){this.isSelectEnabled=a};a.prototype.exitWCAGMode=function(){this.keyboardNavigationActive&&
(this.keyboardNavigationActive=!1,this.unmark(this.keyboardNavigationCurrentElement),this.keyboardNavigationCurrentElement=null)};a.prototype.getTextToSpeechOrNull=function(a){d=null;a&&(d=a.getModule("Text_To_Speech1"));return d};g.KeyboardController=a;g.KeyboardControllerKeys=b})(window);(function(g){g.DevicesUtils={isInternetExplorer:function(){return 0<g.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)?!0:!1},isFirefox:function(){return"netscape"in g&&/ rv:/.test(navigator.userAgent)},isEdge:function(){return(-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Edg"))&&(!!navigator.msSaveOrOpenBlob||!!navigator.msSaveBlob)},getBrowserVersion:function(){var a=navigator.userAgent,b,d=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||
[];if(/trident/i.test(d[1]))return b=/\brv[ :]+(\d+)/g.exec(a)||[],"IE "+(b[1]||"");if("Chrome"===d[1]&&(b=a.match(/\b(OPR|Edg([e]?))\/(\d+)/),null!=b))return b.slice(1).join(" ").replace("OPR","Opera");d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=a.match(/version\/(\d+)/i))&&"Chrome"!==d[0]&&d.splice(1,1,b[1]);return d.join(" ")}}})(window);(function(g){g.Commands={dispatch:function(a,b,d,c){var e,f;for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&f.toLowerCase()===b&&a[f]&&(e=a[f].call(c,d));return e}};g.CommandsQueueFactory={create:function(a){console.log("CommandsQueueFactory is deprecated and won't be maintained from now. Please use: DeferredSyncQueue");return new g.CommandsQueue(a)}};g.CommandsQueueTask=function(a,b){this.name=a;this.params=b};g.CommandsQueue=function(a){this.module=a;this.queue=[]};g.CommandsQueue.prototype.addTask=
function(a,b){var d=new g.CommandsQueueTask(a,b);this.queue.push(d)};g.CommandsQueue.prototype.getTask=function(){return this.isQueueEmpty()?null:this.queue.splice(0,1)[0]};g.CommandsQueue.prototype.getAllTasks=function(){return this.queue};g.CommandsQueue.prototype.executeTask=function(){var a=this.getTask();a&&this.module.executeCommand(a.name.toLowerCase(),a.params)};g.CommandsQueue.prototype.executeAllTasks=function(){for(;!this.isQueueEmpty();)this.executeTask()};g.CommandsQueue.prototype.getTasksCount=
function(){return this.queue.length};g.CommandsQueue.prototype.isQueueEmpty=function(){return 0===this.queue.length}})(window);(function(g){g.ImageViewer={validateSound:function(a){var b=[];if(a&&$.isArray(a))for(var d=0;d<a.length;d++){var c=ModelValidationUtils.isStringWithPrefixEmpty(a[d]["MP3 sound"],"/file/"),e=ModelValidationUtils.isStringWithPrefixEmpty(a[d]["AAC sound"],"/file/"),f=ModelValidationUtils.isStringWithPrefixEmpty(a[d]["OGG sound"],"/file/");b.push({AAC:e?"":a[d]["AAC sound"],OGG:f?"":a[d]["OGG sound"],MP3:c?"":a[d]["MP3 sound"],isEmpty:c&&e&&f})}return{sounds:b}},loadSounds:function(a,b){var d=[];if(!buzz.isSupported()||
!a||!b)return d;for(var c=0;c<b;c++)c>a.length-1||a[c].isEmpty?d[c]=null:(d[c]=""!==a[c].MP3&&buzz.isMP3Supported()?new buzz.sound(a[c].MP3):""!==a[c].OGG&&buzz.isOGGSupported()?new buzz.sound(a[c].OGG):new buzz.sound(a[c].AAC),d[c].load());return d},convertFramesList:function(a,b,d){if(ModelValidationUtils.isStringEmpty(a))return{isError:!0,errorCode:"FL01"};var c=a.match(/[0-9a-zA-Z,-]+/);if(null===c||a.length!==c[0].length)return{isError:!0,errorCode:"FL02"};for(var c=[],a=a.split(","),e=0;e<a.length;e++){if(ModelValidationUtils.isStringEmpty(a[e]))return{isError:!0,
errorCode:"FL04"};if(-1!==a[e].search("-")){var f=a[e].split("-")[1],i=ModelValidationUtils.validateIntegerInRange(f,d,b);if(!i.isValid)return{isError:!0,errorCode:"FL05"};var j=a[e].split("-")[0],f=ModelValidationUtils.validateIntegerInRange(j,f.value,b);if(!f.isValid||f.value>i.value)return{isError:!0,errorCode:"FL05"};for(f=f.value;f<=i.value;f++)c.push(f)}else{i=ModelValidationUtils.validateIntegerInRange(a[e],d,b);if(!i.isValid)return{isError:!0,errorCode:"FL03"};c.push(i.value)}}c.sort();c=
ModelValidationUtils.removeDuplicatesFromArray(c);return{isError:!1,list:c}}}})(window);(function(g){g.StringUtils={replaceAll:function(a,b,d){b=b.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return a.replace(RegExp(b,"g"),d)},startsWith:function(a,b){return a.match("^"+b)==b},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},format:function(){if(0!=arguments.length){var a=arguments[0].toString();if(1==arguments.length)return a;for(var b=0,d=1;d<arguments.length;d++)a=a.replace(RegExp("\\{"+b+"\\}","gi"),arguments[d]),b++;return a}},timeFormat:function(a){var b=Math.floor(a/
60),a=Math.floor(a%60);return(10<=b?b:"0"+b)+":"+(10<=a?a:"0"+a)},getNumericPattern:function(){return"^[+-]?[,.\\d]*([eE][+-]?[,.\\d]*)?$"}}})(window);(function(g){g.TextParserProxy=function(a){if(null==a)return null;this.parser=a};g.TextParserProxy.prototype.parse=function(a){a=this.parser.parse(a);return StringUtils.replaceAll(a,"href='#'",'href="javascript:void(0)"')};g.TextParserProxy.prototype.parseAltTexts=function(a){return this.parser.parseAltTexts(a)};g.TextParserProxy.prototype.connectLinks=function(a){return this.parser.connectLinks(a)};g.TextParserProxy.prototype.parseGaps=function(a,b){"undefined"==typeof b&&(b={isCaseSensitive:!1});
return this.parser.parseGaps(a,b)};g.TextParserProxy.prototype.findClosingBracket=function(a){return this.parser.findClosingBracket(a)};g.TextParserProxy.prototype.escapeXMLEntities=function(a){return this.parser.escapeXMLEntities(a)};g.TextParserProxy.prototype.parseAnswer=function(a){return this.parser.parseAnswer(a)}})(window);(function(g){g.TTSUtils={statics:{breakText:"&&break&&",gap:"&&gap&&",dropdown:"&&dropdown&&",correct:"&&correct&&",wrong:"&&wrong&&",empty:"&&empty&&",nonBreakingSpace:"\u00a0",textNodeId:3},GENDER:{MASCULINE:0,FEMININE:1,NEUTER:2},getTextVoiceArrayFromElement:function(a,b){for(var d=$("<div></div>").append(a.clone()),d=this._prepareAltTexts(d),d=this._prepareImages(d),d=this._prepareLists(d),d=this._parseLineBreakTags(d),d=this._addEndingSpace(d),d=d.text().split(this.statics.breakText),c=[],e=
0;e<d.length;e++)c.push(this.getTextVoiceObject(d[e].trim(),b));return c},getTextVoiceArrayFromElementWithGaps:function(a,b,d){var c=$("<div></div>").append(a.clone()),e={gap:"gap",dropdown:"dropdown",correct:"correct",empty:"empty",wrong:"wrong"};if(d&&(d.gap&&(e.gap=d.gap),d.dropdown&&(e.dropdown=d.dropdown),d.correct&&(e.correct=d.correct),d.wrong&&(e.wrong=d.wrong),d.empty))e.empty=d.empty;a.find("select[id]").each(function(){var a=$(this).attr("id");c.find("#"+a).val($(this).val())});c=this._prepareAltTexts(c);
c=this._prepareImages(c);c=this._prepareGaps(c);c=this._prepareLists(c);c=this._parseLineBreakTags(c);c=this._addEndingSpace(c);return this._parseRawText(c.text(),e,b)},getTextVoiceArrayFromGap:function(a,b,d,c){var e=$("<div></div>").append(a.clone()),f={gap:"gap",dropdown:"dropdown",correct:"correct",empty:"empty",wrong:"wrong"};if(c&&(c.gap&&(f.gap=c.gap),c.dropdown&&(f.dropdown=c.dropdown),c.correct&&(f.correct=c.correct),c.wrong&&(f.wrong=c.wrong),c.empty))f.empty=c.empty;var e=this._prepareAltTexts(e),
e=this._prepareImages(e),i=0;b.find("span.ic_gap, input.ic_gap, select.ic_inlineChoice").each(function(b){$(this).is(a)&&(i=b)});a.is("select")&&e.find("select").val(a.val());e=this._prepareGaps(e,i);return this._parseRawText(e.text(),f,d)},getTextVoiceObject:function(a,b){return{text:a,lang:b}},getSpeechTextProperty:function(a,b){var d=a.trim();return void 0===d||null===d||""===d?b:d},parsePreviewAltText:function(a){a=a.replace(/\\alt{([^{}|]*?)\|[^{}|]*?}(\[[a-zA-Z0-9_\- ]*?\])*/g,"$1");return a=
a.replace(/\\alt{([^|{}]*?)\|[^|{}]*?}/g,"$1")},numberToPolishNumber:function(a){if(0===a)return"zero";var b=" jeden dwa trzy cztery pi\u0119\u0107 sze\u015b\u0107 siedem osiem dziewi\u0119\u0107".split(" "),d=" jedena\u015bcie dwana\u015bcie trzyna\u015bcie czterna\u015bcie pi\u0119tna\u015bcie szesna\u015bcie siedemna\u015bcie osiemna\u015bcie dziewi\u0119tna\u015bcie".split(" "),c=" dziesi\u0119\u0107 dwadzie\u015bcia trzydzie\u015bci czterdzie\u015bci pi\u0119\u0107dziesi\u0105t sze\u015b\u0107dziesi\u0105t siedemdziesi\u0105t osiemdziesi\u0105t dziewi\u0119\u0107dziesi\u0105t".split(" "),
e=Math.floor(a%10),f=Math.floor(a/10%10),i=Math.floor(a/100%10),j=Math.floor(a%Math.pow(10,6)/Math.pow(10,3)),h=Math.floor(a%Math.pow(10,9)/Math.pow(10,6)),a=Math.floor(a%Math.pow(10,12)/Math.pow(10,9)),a=""+(this._partOfNumberToBigElementOfPolishNumber(a,["miliard","miliardy","miliard\u00f3w"],!0)+" "),a=a+(this._partOfNumberToBigElementOfPolishNumber(h,["milion","miliony","milion\u00f3w"],!0)+" "),a=a+(this._partOfNumberToBigElementOfPolishNumber(j,["tysi\u0105c","tysi\u0105ce","tysi\u0119cy"],
!0)+" "),a=a+(" sto dwie\u015bcie trzysta czterysta pi\u0119\u0107set sze\u015b\u0107set siedemset osiemset dziewi\u0119\u0107set".split(" ")[i]+" "),a=1===f&&0!=e?a+d[e]:a+(c[f]+" "+b[e]);return this._removeExtraSpaces(a)},numberToPolishOrdinalNumber:function(a,b){b||(b=this.GENDER.MASCULINE);return 0===a?this._simpleChangePolishWordGender("zerowy",b):this._getTextNonOrdinalPartOfNumber(a)+" "+this._getTextOrdinalPartOfNumber(a,b)},numberToOrdinalNumber:function(a,b,d){d||(d=this.GENDER.MASCULINE);
return["pl","pl-pl","polish"].includes(b.toLowerCase())?this.numberToPolishOrdinalNumber(a,d):a},_prepareAltTexts:function(a){a.find('[aria-hidden="true"]').remove();a.find("[aria-label]").each(function(){var a=$(this).attr("aria-label"),a=g.xssUtils.sanitize(a),d=$(this).attr("lang");d&&0<d.trim().length&&(a="\\alt{ |"+a+"}[lang "+d+"]");$(this).append(a)});return a},_prepareImages:function(a){var b=this.statics.breakText;a.find("img[alt]").each(function(){var a=g.xssUtils.sanitize($(this).attr("alt"));
$("<span>"+b+"</span>").insertBefore($(this));$("<span>"+b+"</span>").insertAfter($(this));$("<span>"+a+"</span>").insertAfter($(this))});return a},_prepareLists:function(a){a.find("ol > li").each(function(){for(var a=0,d=this,c=this.parentElement;null!=d;){if(d.nodeName&&"li"==d.nodeName.toLowerCase()&&(a+=1,d.hasAttribute("value"))){var e=d.getAttribute("value");if(!isNaN(e)){a+=parseInt(e)-1;break}}d=d.previousSibling}e=c.getAttribute("start");null==d&&(0<e.length&&!isNaN(e))&&(a+=Number(e)-1);
d=a+"";if("a"==c.getAttribute("type").toLowerCase()){c=a;for(d="";0!=c;)e=c%26,d=" "+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[e-1]+d,c-=e,c/=26}this.innerHTML=". "+d+": "+this.innerHTML;this.setAttribute("value",a)});return a},_addEndingSpace:function(a){function b(a){a=a.replaceAll(d.statics.nonBreakingSpace," ").replaceAll("&nbsp;"," ").trim();if(0===a.length)return!0;for(var b=0;5>b;b++)if(a.endsWith(".,;?!"[b]))return!0;return!1}var d=this;a.find("div, p").each(function(){originalHTML=this.innerHTML;null!=
this.previousSibling&&this.previousSibling.nodeType==d.statics.textNodeId&&!b(this.previousSibling.wholeText)&&(originalHTML="."+d.statics.nonBreakingSpace+originalHTML);null!=this.lastChild&&this.lastChild.nodeType==d.statics.textNodeId&&!b(this.innerText)&&(originalHTML=originalHTML+"."+d.statics.nonBreakingSpace);this.innerHTML=originalHTML+=d.statics.nonBreakingSpace});return a},_parseLineBreakTags:function(a){a.find("br").replaceWith("<div>."+this.statics.nonBreakingSpace+"</div>");return a},
_prepareGaps:function(a,b){var d=this.statics.breakText,c=this.statics.gap,e=this.statics.dropdown,f=this.statics.correct,i=this.statics.wrong,j=this.statics.empty;a.find("span.ic_gap, input.ic_gap, select.ic_inlineChoice").each(function(a){b?$(this).attr("index",b+1):$(this).attr("index",a+1)});a.find("span.ic_gap, input.ic_gap, select.ic_inlineChoice").each(function(){var a=$(this),b=a.attr("index"),g="",g=a.is("select")?d+e+" "+b+d:d+c+" "+b+d,b="",b=a.is("select, input")?a.val():a.text(),b=0===
b.length||a.is("select")&&("-"===b||"---"===b)?a.hasClass("ic_gap-empty")?"":j+d:b+d,k="";a.hasClass("ic_gap-correct")?k=f+d:a.hasClass("ic_gap-wrong")?k=i+d:a.hasClass("ic_gap-empty")&&(k=j+d);g=$("<span>"+g+b+k+"</span>");a.replaceWith(g)});return a},_parseRawText:function(a,b,d){for(var c=a.split(this.statics.breakText),e=[],f=0;f<c.length;f++)0!=c[f].trim().length&&(-1!==c[f].trim().indexOf(this.statics.gap)?(a=c[f].trim().replace(this.statics.gap,b.gap),e.push(this.getTextVoiceObject(a))):-1!==
c[f].trim().indexOf(this.statics.dropdown)?(a=c[f].trim().replace(this.statics.dropdown,b.dropdown),e.push(this.getTextVoiceObject(a))):-1!==c[f].trim().indexOf(this.statics.correct)?(a=c[f].trim().replace(this.statics.correct,b.correct),e.push(this.getTextVoiceObject(a))):-1!==c[f].trim().indexOf(this.statics.wrong)?(a=c[f].trim().replace(this.statics.wrong,b.wrong),e.push(this.getTextVoiceObject(a))):-1!==c[f].trim().indexOf(this.statics.empty)?(a=c[f].trim().replace(this.statics.empty,b.empty),
e.push(this.getTextVoiceObject(a))):e.push(this.getTextVoiceObject(c[f].trim(),d)));return e},focusInvisibleElement:function(){$("#input_element_for_focus_to_change_focused_element_by_browser").focus()},_removeExtraSpaces:function(a){return a.replace(/\s+/g," ").trim()},_reverseString:function(a){for(var b="",d=a.length-1;0<=d;d--)b+=a[d];return b},_removeLastWord:function(a){var b=a.lastIndexOf(" ");return a.substring(0,b)},_simpleChangePolishWordGender:function(a,b){if(""===a||![this.GENDER.MASCULINE,
this.GENDER.FEMININE,this.GENDER.NEUTER].includes(b))return a;var d="y";b===this.GENDER.FEMININE?d="a":b===this.GENDER.NEUTER&&(d="e");var c=a.slice(a.length-1);return["a","e","y"].includes(c)?a.slice(0,-1)+d:a+d},_partOfNumberToBigElementOfPolishNumber:function(a,b,d){d||(d=!1);if(0===a&&d)return"";d=[2,3,4].includes(a%10);return 1===a?" "+b[0]+" ":d?this.numberToPolishNumber(a)+" "+b[1]+" ":this.numberToPolishNumber(a)+" "+b[2]+" "},_getOrdinalPartOfNumber:function(a){for(var b="",a=a.toString(),
d,c=a.length-1;0<=c;c--)if(b+=a[c],"0"!==a[c]){(d=0===(a.length-c-1)%3)&&0<c&&(b+=a[c-1]);break}return parseInt(this._reverseString(b))},_getTextNonOrdinalPartOfNumber:function(a){numberLength=a.toString().length;var b=this._getOrdinalPartOfNumber(a).toString().length,d=Math.floor(a/Math.pow(10,b))*Math.pow(10,b);if(b===numberLength)return"";var c=this.numberToPolishNumber(d),e=Math.floor((b-1)/3),a=Math.floor(a/Math.pow(10,3*(e+1)))*Math.pow(10,3*(e+1))!==d;3<b&&a&&(c=this._removeLastWord(c));return this._removeExtraSpaces(c)},
_getTextOrdinalPartOfNumber:function(a,b){b||(b=this.GENDER.MASCULINE);var d=" pierwszy drugi trzeci czwarty pi\u0105ty sz\u00f3sty si\u00f3dmy \u00f3smy dziewi\u0105ty".split(" "),c=" jedenasty dwunasty trzynasty czternasty pi\u0119tnasty szesnasty siedemnasty osiemnasty dziewi\u0119tnasty".split(" "),e=" dziesi\u0105ty dwudziesty trzydziesty czterdziesty pi\u0119\u0107dziesi\u0105ty sze\u015b\u0107dziesi\u0105ty siedemdziesi\u0105ty osiemdziesi\u0105ty dziewi\u0119\u0107dziesi\u0105ty".split(" "),
f=" setny dwusetny trzysetny czterysetny pi\u0119\u0107setny sze\u015b\u0107setny siedemsetny osiemsetny dziewi\u0119\u0107setny".split(" "),i=" jedno dwu trzy cztero pi\u0119cio sze\u015bcio siedmio o\u015bmio dziewi\u0119cio".split(" "),j=" jedenasto dwunasto trzynasto czternasto pi\u0119tnasto szesnasto siedemnasto osiemnasto dziewi\u0119tnasto".split(" "),h=" dziesi\u0119cio dwudziesto trzydziesto czterdziesto pi\u0119\u0107dziesi\u0119cio sze\u015b\u0107dziesi\u0119cio siedemdziesi\u0119cio osiemdziesi\u0119cio dziewi\u0119\u0107dziesi\u0119cio".split(" "),
g=" stu dwustu trzystu czterystu pi\u0119ciuset sze\u015bciuset siedmuset o\u015bmiuset dziewi\u0119ciuset".split(" "),m=["","tysi\u0119czny","milionowy","miliardowy"];d.forEach(function(a,c,d){d[c]=this._simpleChangePolishWordGender(a,b)}.bind(this));c.forEach(function(a,c,d){d[c]=this._simpleChangePolishWordGender(a,b)}.bind(this));e.forEach(function(a,c,d){d[c]=this._simpleChangePolishWordGender(a,b)}.bind(this));f.forEach(function(a,c,d){d[c]=this._simpleChangePolishWordGender(a,b)}.bind(this));
m.forEach(function(a,c,d){d[c]=this._simpleChangePolishWordGender(a,b)}.bind(this));b===this.GENDER.FEMININE&&(d[2]="druga");var k=this._getOrdinalPartOfNumber(a).toString(),o=k.length,n=0===(o-1)%3,q=1===(o-1)%3,p=q&&"1"===k[0]&&"0"!==k[1],r=2===(o-1)%3,m=m[Math.floor((o-1)/3)];1===o?ordinalPartAsText=d[k[0]]:p&&2===o?ordinalPartAsText=c[k[1]]:2===o?ordinalPartAsText=(e[k[0]]+" "+d[k[1]]).trim():3===o?ordinalPartAsText=f[k[0]]:(n?ordinalPartAsText=i[k[0]]:p?ordinalPartAsText=j[k[1]]:q?ordinalPartAsText=
(h[k[0]]+" "+i[k[1]]).trim():r&&(ordinalPartAsText=g[k[0]]),ordinalPartAsText+=m);return this._removeExtraSpaces(ordinalPartAsText)}}})(window);(function(g){g.Internationalization={EASTERN_ARABIC:"ea",WESTERN_ARABIC:"wa",PERSO_ARABIC:"pa",getNumericals:function(a){var b={};b[g.Internationalization.WESTERN_ARABIC]={"0":"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"};b[g.Internationalization.EASTERN_ARABIC]={"0":"&#x0660",1:"&#x0661",2:"&#x0662",3:"&#x0663",4:"&#x0664",5:"&#x0665",6:"&#x0666",7:"&#x0667",8:"&#x0668",9:"&#x0669"};b[g.Internationalization.PERSO_ARABIC]={"0":"&#x06F0",1:"&#x06F1",2:"&#x06F2",3:"&#x06F3",4:"&#x06F4",
5:"&#x06F5",6:"&#x06F6",7:"&#x06F7",8:"&#x06F8",9:"&#x06F9"};return a in b?b[a]:b[g.Internationalization.WESTERN_ARABIC]},translate:function(a,b){for(var d=a.toString(),c="",e=g.Internationalization.getNumericals(b),f=0;f<d.length;f++)c+=e[+d.charAt(f)];return c}}})(window);(function(g){g.LoadedPromise=function(a,b){var d=[];$.each(b,function(b){var e=new $.Deferred,f=e.promise();a[b+"LoadedDeferred"]=e;a[b+"Loaded"]=f;d.push(f);a.getLoadedPromise=function(){var a=new $.Deferred,b=function(c,d){d==c.length?a.resolve():$.when(c[d]).then(function(){b(c,d+1)})};b(d,0);return a.promise()}})}})(window);(function(g){var a=function(){};a._internals={};a._internals.clicks=[];a._internals.callbacks=[];a._internals.getUserAgent=function(){return navigator.userAgent};a._internals.getCurrentTime=function(){return(new Date).getTime()};a._internals.getTargetCallbacks=function(b){return a._internals.callbacks.filter(function(a){return a.target==b}).map(function(a){return a.callback})};a._internals.removeTargetCallbacks=function(b){a._internals.callbacks=a._internals.callbacks.filter(function(a){return a.target!=
b})};a._internals.addCallback=function(b,d){a._internals.callbacks.push({target:b,callback:d})};a._internals.getLastTargetClick=function(b){for(var d=a._internals.clicks,c=d.length-1;0<=c;c-=1)if(d[c].target==b)return d[c];return null};a._internals.removeTargetClicks=function(b){a._internals.clicks=a._internals.clicks.filter(function(a){return a.target!=b})};a._internals.addClick=function(b,d){a._internals.removeTargetClicks(b);a._internals.clicks.push({target:b,time:d})};a._internals.doubleTapHandler=
function(b){var d=this,c=a._internals.getCurrentTime(),e=a._internals.getLastTargetClick(b.target);null!==e&&e.time+300>=c?(a._internals.removeTargetClicks(b.target),a._internals.getTargetCallbacks(d).forEach(function(a){a.call(d,b)})):a._internals.addClick(b.target,c)};a._internals.getStartEvent=function(b){var d=b||a._internals.getUserAgent(),b=/chrome/i.exec(d),d=/android/i.exec(d);return"ontouchstart"in g&&(!b||d)?"touchstart":"mousedown"};a.on=function(b,d){var c=b[0],e=a._internals.getStartEvent();
a._internals.addCallback(c,d);b.on(e,a._internals.doubleTapHandler)};a.off=function(b){var d=b[0],c=a._internals.getStartEvent();b.off(c,a._internals.doubleTapHandler);a._internals.removeTargetCallbacks(d);a._internals.removeTargetClicks(d)};g.EventsUtils={};g.EventsUtils.DoubleTap=a})(window);(function(g){function a(){}a.getErrorObject=function(a){return{isValid:!1,isError:!0,errorCode:a}};a.showErrorMessage=function(a,d,c){if("undefined"!=typeof c)for(var e in c)c.hasOwnProperty(e)&&(d=d.replace("%"+e+"%",c[e]));c="<p>"+d+"</p>";a.innerHTML=c};g.ModelErrorUtils=g.ModelErrorUtils||a})(window);(function(g){function a(a){this.buildConfiguration(a);var b,d,e,f,g,o,n,q,p,r,s,u,t,v,w,x,a=document.createElement("div");a.className="CustomControlsBar-wrapper";b=document.createElement("div");b.className="CustomControlsBar-wrapper-controls-controlsWrapper";a.appendChild(b);d=document.createElement("div");d.className="CustomControlsBar-wrapper-controls-progressBarWrapper";a.appendChild(d);e=document.createElement("div");e.className="CustomControlsBar-wrapper-controls-progressBarWrapper-grayProgressBar";
d.appendChild(e);f=document.createElement("div");f.className="CustomControlsBar-wrapper-controls-progressBarWrapper-redProgressBar";d.appendChild(f);g=document.createElement("div");g.className="CustomControlsBar-wrapper-controls-play";b.appendChild(g);o=document.createElement("div");o.className="CustomControlsBar-wrapper-controls-pause";o.style.display="none";b.appendChild(o);n=document.createElement("div");n.className="CustomControlsBar-wrapper-controls-stop";b.appendChild(n);q=document.createElement("div");
q.className="CustomControlsBar-wrapper-controls-volume";b.appendChild(q);p=document.createElement("div");p.className="CustomControlsBar-wrapper-controls-volumeBarWrapper";b.appendChild(p);r=document.createElement("div");r.className="CustomControlsBar-wrapper-controls-volumeBarWrapper-volumeBackground";r.style.display="none";p.appendChild(r);s=document.createElement("div");s.className="CustomControlsBar-wrapper-controls-volumeBarWrapper-volumeBackgroundSelected";s.style.display="none";p.appendChild(s);
u=document.createElement("div");u.className="CustomControlsBar-wrapper-controls-fullscreen";b.appendChild(u);t=document.createElement("div");t.className="CustomControlsBar-wrapper-controls-closeFullscreen";t.style.display="none";b.appendChild(t);x=document.createElement("div");x.className="CustomControlsBar-wrapper-controls-burgersContainer";b.appendChild(x);v=document.createElement("div");v.className="CustomControlsBar-wrapper-controls-timer";b.appendChild(v);w=document.createElement("div");w.className=
"CustomControlsBar-wrapper-controls-videoSpeedController";b.appendChild(w);this.elements={mainDiv:c(a),playButton:c(g),pauseButton:c(o),stopButton:c(n),progressBarWrapper:c(d),volume:c(q),volumeBarWrapper:c(p),timer:c(v),controlsWrapper:c(b),volumeBackground:c(r),fullscreen:c(u),redProgressBar:c(f),grayProgressBar:c(e),closeFullscreen:c(t),volumeBackgroundSelected:c(s),burgersContainer:c(x),videoSpeedController:c(w)};this.progressBarChangedCallbacks=[];this.volumeChangedCallbacks=[];this.ownTimerCallbacks=
[];this.playbackRate=1;this.isSelectorOpen=!1;this.addPlayCallback(this.showPauseButton.bind(this));this.addPauseCallback(this.showPlayButton.bind(this));this.addStopCallback(this.showPlayButton.bind(this));this.addVolumeClickCallback(this.showHideVolumeBar.bind(this));this.addFullscreenCallback(this.showCloseFullscreenButton.bind(this));this.addCloseFullscreenCallback(this.showFullscreenButton.bind(this));this.addProgressBarClickCallback(this.progressBarClicked.bind(this));this.addVolumeBarClickCallback(this.volumeBarClicked.bind(this));
this.hideControls=this.hideControls.bind(this);this.showControls=this.showControls.bind(this);this.onWrapperMouseEnter=this.onWrapperMouseEnter.bind(this);this.onWrapperMouseMove=this.onWrapperMouseMove.bind(this);this.refreshDataIntervalFunction=this.refreshDataIntervalFunction.bind(this);this.actualizeTimer();this.configuration.parentElement&&(this.buildShowAndHideControlsEvents(),this.addCallbackForParentChildren(this.playPauseClick.bind(this)));this.refreshDataIntervalFunction=setInterval(this.refreshDataIntervalFunction,
this.configuration.mouseDontMoveRefreshTime);this.configuration.isVolumeEnabled||(this.elements.volume.element.style.display="none")}function b(a){var b;if(null===a||void 0===a)return"--:--";b=parseInt(a/60,10);10>b&&(b="0"+b);a=parseInt(a%60,10);10>a&&(a="0"+a);return b+":"+a}function d(a,b){var c=document.createElement("select");[0.25,0.5,0.75,1,1.25,1.5,1.75,2].forEach(function(a){var b=document.createElement("option");b.text=a.toString();b.value=a.toString();1===a&&(b.selected=!0);c.appendChild(b)},
this);$(c).on("change",function(){b($(c).val());a.hideControls()});$(c).on("mousedown",function(){a.isSelectorOpen=!a.isSelectorOpen});return c}function c(a){return{element:a,events:{}}}function e(a,b,c){a.events[c]||(a.events[c]=[]);a.events[c].push({callback:b});a.element.addEventListener(c,b,!1)}function f(a){for(var b in a.events)if(a.events.hasOwnProperty(b))for(var c=0;c<a.events[b].length;c++)a.element.removeEventListener(b,a.events[b][c].callback)}g.CustomControlsBar=a;a.prototype.addProgressChangedCallback=
function(a){this.progressBarChangedCallbacks.push(a)};a.prototype.addVolumeChangedCallback=function(a){this.volumeChangedCallbacks.push(a)};a.prototype.progressBarClicked=function(a){for(var b=100*a.offsetX/this.elements.grayProgressBar.element.offsetWidth,c=0;c<this.progressBarChangedCallbacks.length;c++)this.progressBarChangedCallbacks[c](b);a.preventDefault();a.stopPropagation()};a.prototype.volumeBarClicked=function(a){for(var b=100*a.offsetX/this.elements.volumeBackground.element.offsetWidth,
c=0;c<this.volumeChangedCallbacks.length;c++)this.volumeChangedCallbacks[c](b);this.elements.volumeBackgroundSelected.element.style.width=parseInt(b/100*this.elements.volumeBackground.element.offsetWidth,10)+"px";a.preventDefault();a.stopPropagation()};a.prototype.playPauseClick=function(){"block"===this.elements.playButton.element.style.display?this.elements.playButton.element.click():this.elements.pauseButton.element.click()};a.prototype.buildConfiguration=function(a){this.configuration={mouseDontMoveOnPlaybackRate:10,
mouseDontMoveClocks:30,mouseDontMoveRefreshTime:100,maxMediaTime:0,actualMediaTime:0,videoObject:null,parentElement:null,isVolumeEnabled:!0};if(a)for(var b in this.configuration)this.configuration.hasOwnProperty(b)&&void 0!==a[b]&&(this.configuration[b]=a[b])};a.prototype.actualizeTimer=function(){var a;this.elements.timer.element.innerHTML=b(this.configuration.actualMediaTime)+"/"+b(this.configuration.maxMediaTime);this.configuration.maxMediaTime&&(a=parseInt(100*(this.configuration.actualMediaTime/
this.configuration.maxMediaTime),10),this.elements.redProgressBar.element.style.width=a+"%")};a.prototype.buildShowAndHideControlsEvents=function(){this.actualTime=0;this.configuration.parentElement.addEventListener("mouseleave",this.hideControls,!1);this.configuration.parentElement.addEventListener("mouseenter",this.onWrapperMouseEnter,!1);this.configuration.parentElement.addEventListener("mousemove",this.onWrapperMouseMove,!1)};a.prototype.refreshDataIntervalFunction=function(){this.configuration.parentElement&&
!this.mainDivIsHidden&&(this.actualTime>this.configuration.mouseDontMoveClocks&&this.hideControls(),this.actualTime>this.configuration.mouseDontMoveOnPlaybackRate&&(this.isSelectorOpen=!1),this.actualTime++);var a=this.configuration.videoObject;null!==a&&(this.setCurrentTime(a.currentTime),3<=a.readyState&&(!1===a.paused?this.showPauseButton():this.showPlayButton()));for(a=0;a<this.ownTimerCallbacks.length;a++)this.ownTimerCallbacks[a].call(this)};a.prototype.checkBurgerMenuSize=function(a){var b=
a.element.offsetHeight,c=a.element.offsetWidth,d=a.element.getBoundingClientRect().left-this.configuration.parentElement.getBoundingClientRect().left,e=this.configuration.parentElement.offsetWidth,f=a.element.style.marginLeft;""===f&&(f="0");f=parseInt(f.replace("px",""),10);a.element.style.marginTop="-"+(b-2)+"px";a.element.style.marginLeft=c+d-f>e?"-"+(c+d-e-f)+"px":"0px"};a.prototype.addCallbackToBuildInTimer=function(a){this.ownTimerCallbacks.push(a)};a.prototype.onWrapperMouseMove=function(){this.actualTime=
0;this.showControls()};a.prototype.hideControls=function(){this.isSelectorOpen||(this.elements.mainDiv.element.style.display="none",this.mainDivIsHidden=!0)};a.prototype.onWrapperMouseEnter=function(){this.showControls();this.actualTime=0};a.prototype.showControls=function(){this.mainDivIsHidden&&(this.elements.mainDiv.element.style.display="block",this.mainDivIsHidden=!1)};a.prototype.addBurgerMenu=function(a,b){function d(a){this.isSelectorOpen||(a.element.style.display="none")}var f=document.createElement("div");
f.classList.add("CustomControlsBar-wrapper-controls-burgersContainer-"+a);this.elements.burgersContainer.element.appendChild(f);this.elements[a]=c(f);var g=document.createElement("div");g.classList.add("CustomControlsBar-wrapper-controls-burgersContainer-container-"+a);var k=c(g);this.elements["BURGER_MENU_"+a+"_container"]=k;f.appendChild(g);b.forEach(function(b,f){var j=document.createElement("div");j.classList.add("CustomControlsBar-wrapper-controls-burgersContainer-"+a+"-element");j.classList.add("number-"+
f);j.innerText=b.title;var l=c(j);this.elements["BURGER_MENU_"+a+"_"+f]=l;e.call(this,l,this.wrapBurgerElementClick(d.bind(this,k),b.callback),"click");g.appendChild(j)},this);e(this.elements[a],function(a){a.element.style.display="block";this.checkBurgerMenuSize(a)}.bind(this,k),"mouseenter");e(this.elements[a],d.bind(this,k),"mouseleave")};a.prototype.addVideoSpeedController=function(a){var b=document.createElement("div");b.classList.add("video-playback-rate");b.appendChild(d(this,a));this.elements.videoSpeedController.element.appendChild(b);
this.elements.VideoSpeedController=c(b)};a.prototype.resetPlaybackRateSelectValue=function(){$(this.elements.videoSpeedController.element).find("select").val(1)};a.prototype.wrapBurgerElementClick=function(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}};a.prototype.removeBurgerMenu=function(a){this.elements[a]&&(f.call(this,this.elements[a]),this.elements[a].element.parentNode.removeChild(this.elements[a].element),delete this.elements[a]);for(var b in this.elements)this.elements.hasOwnProperty(b)&&
b.startsWith("BURGER_MENU_"+a+"_")&&(f.call(this,this.elements[b]),this.elements[b].element.parentNode.removeChild(this.elements[b].element),delete this.elements[b])};a.prototype.showPauseButton=function(a){this.elements.playButton.element.style.display="none";this.elements.pauseButton.element.style.display="block";void 0!==a&&(a.preventDefault(),a.stopPropagation())};a.prototype.showCloseFullscreenButton=function(a){this.elements.fullscreen.element.style.display="none";this.elements.closeFullscreen.element.style.display=
"block";void 0!==a&&null!==a&&(a.preventDefault(),a.stopPropagation())};a.prototype.showFullscreenButton=function(a){this.elements.closeFullscreen.element.style.display="none";this.elements.fullscreen.element.style.display="block";void 0!==a&&null!==a&&(a.preventDefault(),a.stopPropagation())};a.prototype.showHideVolumeBar=function(a){"none"===this.elements.volumeBackground.element.style.display?(this.elements.volumeBackground.element.style.display="block",this.elements.volumeBackgroundSelected.element.style.display=
"block"):(this.elements.volumeBackground.element.style.display="none",this.elements.volumeBackgroundSelected.element.style.display="none");a.preventDefault();a.stopPropagation()};a.prototype.showPlayButton=function(a){this.elements.playButton.element.style.display="block";this.elements.pauseButton.element.style.display="none";void 0!==a&&(a.preventDefault(),a.stopPropagation())};a.prototype.addVolumeBarClickCallback=function(a){e.call(this,this.elements.volumeBarWrapper,a,"click")};a.prototype.addPlayCallback=
function(a){e.call(this,this.elements.playButton,a,"click")};a.prototype.addProgressBarClickCallback=function(a){e.call(this,this.elements.progressBarWrapper,a,"click")};a.prototype.addCallbackForParentChildren=function(a){for(var b=this.configuration.parentElement.childNodes,d=0;d<b.length;d++)b[d]!==this.elements.mainDiv.element&&(this.elements["PARENT_CHILD_"+d]=c(b[d]),e.call(this,this.elements["PARENT_CHILD_"+d],a,"click"))};a.prototype.addPauseCallback=function(a){e.call(this,this.elements.pauseButton,
a,"click")};a.prototype.addStopCallback=function(a){e.call(this,this.elements.stopButton,a,"click")};a.prototype.addFullscreenCallback=function(a){e.call(this,this.elements.fullscreen,a,"click")};a.prototype.addCloseFullscreenCallback=function(a){e.call(this,this.elements.closeFullscreen,a,"click")};a.prototype.addVolumeClickCallback=function(a){this.configuration.isVolumeEnabled&&e.call(this,this.elements.volume,a,"click")};a.prototype.getMainElement=function(){return this.elements.mainDiv.element};
a.prototype.destroy=function(){clearInterval(this.refreshDataIntervalFunction);this.configuration.parentElement.removeEventListener("mouseleave",this.hideControls);this.configuration.parentElement.removeEventListener("mouseenter",this.onWrapperMouseEnter);this.configuration.parentElement.removeEventListener("mousemove",this.onWrapperMouseMove);for(var a in this.elements)this.elements.hasOwnProperty(a)&&(f.call(this,this.elements[a]),a.startsWith("PARENT_CHILD_")||(this.elements[a].element.parentNode.removeChild(this.elements[a].element),
this.elements[a]=null))};a.prototype.setMaxDurationTime=function(a){this.configuration.maxMediaTime=a;this.actualizeTimer()};a.prototype.setCurrentTime=function(a){this.configuration.actualMediaTime=a;this.actualizeTimer()}})(window);(function(g){g.xssUtils={sanitize:function(a){return DOMPurify.sanitize(a)}}})(window);(function(g){var a={isAIReady:function(b,d,c){return a.isEnabled(b)&&a.isAIModelReady(b,d,c)},isEnabled:function(a){a=a.getContextMetadata();return!!a&&a.isOpenActivitiesEnabled},isAIModelReady:function(a,d,c){a=a.getContextMetadata();return!a||!a.aiReady?!1:void 0!==a.aiReady.find(function(a){return a.page_id===d&&a.activity_id===c})},getOpenActivityScore:function(a,d,c){if(!this.isEnabled(a))return 0;a=a.getScore().getOpenActivityScores(d,c);return!a?0:null!==a.manualGradedScore?a.manualGradedScore:
null!==a.aiGradedScore?a.aiGradedScore:0},updateOpenActivityScore:function(a,d,c,e){this.isEnabled(a)&&a.getScore().updateOpenActivityScore(d,c,e)}};g.OpenActivitiesUtils=a})(window);(function(g){function a(){for(var a=g,b={top:a.pageYOffset,left:a.pageXOffset,right:0,bottom:0};a!==a.parent;){var e=a.frameElement?a.frameElement.getBoundingClientRect().width/a.frameElement.offsetWidth:1,f=a.frameElement.getBoundingClientRect(),i=a.parent.document.documentElement.getBoundingClientRect(),j=Math.round(f.top-i.top),h=Math.round(f.left-i.left),l=f.bottom-i.height,f=f.right-i.width;b.top+=(a.parent.pageYOffset-j)/e;b.left+=(a.parent.pageXOffset-h)/e;b.bottom+=l/e;b.right+=f/e;a=a.parent}return b}
function b(){var a;a=(a=g.document.getElementById("_icplayer"))?a.getElementsByClassName("ic_player")[0]:void 0;return a?a.getBoundingClientRect():void 0}g.PositioningUtils={calculateTopForPopupToBeCentred:function(d){var c=g.frameElement?g.frameElement.getBoundingClientRect().width/g.frameElement.offsetWidth:1,c=g.top.innerHeight/c,e=a(),f=Math.max(0,e.top);0>e.top&&(c+=e.top);c+=Math.min(0,e.bottom);c=Math.min(c,g.document.documentElement.offsetHeight);if(e=b())e.height<c?(c=e.height,f+=e.top):
0<e.top&&(c-=e.top,f+=e.top);c>d&&(f+=(c-d)/2);return Math.max(0,f)},calculateLeftForPopupToBeCentred:function(d){var c=g.frameElement?g.frameElement.getBoundingClientRect().width/g.frameElement.offsetWidth:1,e=g.top.innerWidth/c,f=a(),c=Math.max(0,f.left);0>f.left&&(e+=f.left);e+=Math.min(0,f.right);e=Math.min(e,g.document.documentElement.offsetWidth);if(f=b())f.width<e?(e=f.width,c+=f.left):0<f.left&&(e-=f.left,c+=f.left);return Math.max(0,c+(e-d)/2)}}})(window);(function(g){function a(a){var c=new b;c.setIsAvailableCheckFunction(a);return c}function b(){this.queue=[];this.checkFunction={functionToCall:null}}b.prototype.push=function(a,b,e){this.queue.push({functionToCall:b,argumentsToCall:e,self:a})};b.prototype.callIsAvailableCheckFunction=function(){return this.checkFunction.functionToCall.call(this)};b.prototype.decorate=function(a,b){var e=this,f=b||this.callIsAvailableCheckFunction;return function(){if(f.call(e))return a.apply(this,arguments);e.push(this,
a,arguments)}};b.prototype.setIsAvailableCheckFunction=function(a){this.checkFunction.functionToCall=a};b.prototype.resolve=function(){for(var a=this.queue.length,b=0;b<a;b++){var e=this.queue[b];e.functionToCall.apply(e.self,e.argumentsToCall)}this.queue=[]};g.DecoratorUtils=g.DecoratorUtils||{};g.DecoratorUtils.DeferredSyncQueue=g.DecoratorUtils.DeferredSyncQueue||a})(window);(function(g){var a={parse:function(b,d){var c=b.replace(/\r/g,""),c=c.split(/([0-9 ]+)\n(\d{2}:\d{2}:\d{2},\d{3}) --\> (\d{2}:\d{2}:\d{2},\d{3})/g);c.shift();for(var e=[],f=0;f<c.length;f+=4)e.push({id:c[f].trim(),startTime:d?a.timeColonSeparatedToMs(c[f+1].trim()):c[f+1].trim(),endTime:d?a.timeColonSeparatedToMs(c[f+2].trim()):c[f+2].trim(),text:c[f+3].trim()});return e},cropTimes:function(a,d){for(var c=[],e=0;e<a.length;e++){var f=a[e].startTime-d,g=a[e].endTime-d;0>g||(0>f&&(f=0),c.push({id:a[e].id,
startTime:f,endTime:g,text:a[e].text}))}return c},timeColonSeparatedToMs:function(a){a=/(\d+):(\d{2}):(\d{2}),(\d{3})/.exec(a);if(null===a)return 0;for(var d=1;5>d;d++)a[d]=parseInt(a[d],10),isNaN(a[d])&&(a[d]=0);return 36E5*a[1]+6E4*a[2]+1E3*a[3]+a[4]},msToTimeColonSeparated:function(a){a=parseInt(a,10);if(isNaN(a))return 0;var d=[36E5,6E4,1E3],c=[],e;for(e in d){var f=(a/d[e]>>0).toString();2>f.length&&(f="0"+f);a%=d[e];c.push(f)}a=a.toString();if(3>a.length)for(e=0;e<=3-a.length;e++)a="0"+a;return c.join(":")+
","+a}};g.SrtParser=a})(window);(function(g){g.AudioContextSingleton={getOrCreate:function(){if(!this.audioContext||"closed"===this.audioContext.state)this.audioContext=new (AudioContext||webkitAudioContext);return this.audioContext},close:function(){this.audioContext&&"closed"!==this.audioContext.state&&(this.audioContext.close(),this.audioContext=void 0)}}})(window);(function(g){g.MutationObserverService={observer:null,callbacks:[],createDestroyObserver:function(a,b,d){var c=this;this.observer?this.addCallback(a,b,d):(this.addCallback(a,b,d),this.observer=new MutationObserver(function(a){a.forEach(function(a){a.removedNodes.length&&(a=$(a.removedNodes[0]).attr("id"),c.runCallback(a));c.callbacks.length||c.disconnectObserver()})}))},addCallback:function(a,b,d){a&&this.callbacks.push({moduleId:a,callback:b,param:d})},setObserver:function(){var a=this.getClassName();
if(null!=a){var b={attributes:!0,childList:!0};a.includes("ic_header")?this.observer.observe($(".ic_header").get(0),b):a.includes("ic_footer")?this.observer.observe($(".ic_footer").get(0),b):this.observer.observe($(".ic_page").get(0),b)}},getClassName:function(){return null==this.getLastAddedView()?null:$(this.getLastAddedView()).parent().attr("class")},getLastAddedView:function(){return 0==this.callbacks.length?null:this.callbacks[this.callbacks.length-1].param},disconnectObserver:function(){this.observer.disconnect()},
runCallback:function(a){if(this.callbacks.length&&(a=this.getElementIndex(a),!(0>a))){var a=this.callbacks.splice(a,1)[0],b=this.getMockedEvent(a.param);(0,a.callback)(b)}},getElementIndex:function(a){for(var b=0;b<this.callbacks.length;b++)if(this.callbacks[b].moduleId===a)return b;return-1},getMockedEvent:function(a){return{target:a}}}})(window);(function(g){function a(){}function b(a){try{return""==a.trim()?void 0:a}catch(b){console.log(b)}}var d=!1;a.DEFAULT_LABELS={command_clear:"clear",command_mark:"mark",command_drawLeft:"drawLeft",command_drawRight:"drawRight",command_drawUp:"drawUp",command_drawDown:"drawDown",command_drawLeftFrom:"drawLeftFrom",command_drawRightFrom:"drawRightFrom",command_drawUpFrom:"drawUpFrom",command_drawDownFrom:"drawDownFrom",command_setColor:"setColor",command_setCursor:"setCursor",command_clearMark:"clearMark",
block_mark:"mark",block_x:"x",block_y:"y",block_clear:"clear",block_steps:"steps",block_drawLeft:"drawLeft",block_drawRight:"drawRight",block_drawUp:"drawUp",block_drawDown:"drawDown",block_drawLeftFrom:"drawLeftFrom",block_drawRightFrom:"drawRightFrom",block_drawUpFrom:"drawUpFrom",block_drawDownFrom:"drawDownFrom",block_setColor:"setColor",block_setCursor:"setCursor",block_clearMark:"clearMark"};a.addBlocks=function(c){if(!d){var e=c=void 0===c?a.DEFAULT_LABELS:$.extend({},a.DEFAULT_LABELS,c);Blockly.Blocks.scene_grid_mark=
{init:function(){this.appendDummyInput().appendField(e.block_mark);this.appendValueInput("x").setCheck("Number").setAlign(Blockly.ALIGN_CENTRE).appendField(e.block_x);this.appendValueInput("y").setCheck("Number").setAlign(Blockly.ALIGN_CENTRE).appendField(e.block_y);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(260);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_mark=
function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,"y",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2});\n",e.command_mark,b(c),b(a))};var f=c;Blockly.Blocks.scene_grid_clear={init:function(){this.appendDummyInput().appendField(f.block_clear);this.setColour(0);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_clear=function(){return StringUtils.format("{0}();\n",
f.command_clear)};var g=c;Blockly.Blocks.scene_grid_drawleftfrom={init:function(){this.appendDummyInput().appendField(g.block_drawLeftFrom);this.appendValueInput("x").setCheck("Number").appendField(g.block_x);this.appendValueInput("y").setCheck("Number").appendField(g.block_y);this.appendValueInput("steps").setCheck("Number").appendField(g.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(195);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};
Blockly.JavaScript.scene_grid_drawleftfrom=function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),d=Blockly.JavaScript.valueToCode(a,"y",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2}, {3});\n",g.command_drawLeftFrom,b(c),b(d),b(a))};var j=c;Blockly.Blocks.scene_grid_drawrightfrom={init:function(){this.appendDummyInput().appendField(j.block_drawRightFrom);this.appendValueInput("x").setCheck("Number").appendField(j.block_x);
this.appendValueInput("y").setCheck("Number").appendField(j.block_y);this.appendValueInput("steps").setCheck("Number").appendField(j.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(270);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawrightfrom=function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),d=Blockly.JavaScript.valueToCode(a,
"y",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2}, {3});\n",j.command_drawRightFrom,b(c),b(d),b(a))};var h=c;Blockly.Blocks.scene_grid_drawupfrom={init:function(){this.appendDummyInput().appendField(h.block_drawUpFrom);this.appendValueInput("x").setCheck("Number").appendField(h.block_x);this.appendValueInput("y").setCheck("Number").appendField(h.block_y);this.appendValueInput("steps").setCheck("Number").appendField(h.block_steps);
this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(120);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawupfrom=function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),d=Blockly.JavaScript.valueToCode(a,"y",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2}, {3});\n",
h.command_drawUpFrom,b(c),b(d),b(a))};var l=c;Blockly.Blocks.scene_grid_drawdownfrom={init:function(){this.appendDummyInput().appendField(l.block_drawDownFrom);this.appendValueInput("x").setCheck("Number").appendField(l.block_x);this.appendValueInput("y").setCheck("Number").appendField(l.block_y);this.appendValueInput("steps").setCheck("Number").appendField(l.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(150);this.setTooltip("");
this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawdownfrom=function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),d=Blockly.JavaScript.valueToCode(a,"y",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2}, {3});\n",l.command_drawDownFrom,b(c),b(d),b(a))};var m=c;Blockly.Blocks.scene_grid_drawleft={init:function(){this.appendDummyInput().appendField(m.block_drawLeft);
this.appendValueInput("steps").setCheck("Number").appendField(m.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(195);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawleft=function(a){a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1});\n",m.command_drawLeft,b(a))};var k=c;Blockly.Blocks.scene_grid_drawright=
{init:function(){this.appendDummyInput().appendField(k.block_drawRight);this.appendValueInput("steps").setCheck("Number").appendField(k.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(270);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawright=function(a){a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1});\n",
k.command_drawRight,b(a))};var o=c;Blockly.Blocks.scene_grid_drawup={init:function(){this.appendDummyInput().appendField(o.block_drawUp);this.appendValueInput("steps").setCheck("Number").appendField(o.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(120);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawup=function(a){a=Blockly.JavaScript.valueToCode(a,
"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1});\n",o.command_drawUp,b(a))};var n=c;Blockly.Blocks.scene_grid_drawdown={init:function(){this.appendDummyInput().appendField(n.block_drawDown);this.appendValueInput("steps").setCheck("Number").appendField(n.block_steps);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(150);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_drawdown=
function(a){a=Blockly.JavaScript.valueToCode(a,"steps",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1});\n",n.command_drawDown,b(a))};var q=c;Blockly.Blocks.scene_grid_setcolor={init:function(){this.appendDummyInput().appendField(q.block_setColor);this.appendValueInput("color").setCheck("String").appendField(q.color);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(300);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};
Blockly.JavaScript.scene_grid_setcolor=function(a){var a=Blockly.JavaScript.valueToCode(a,"color",Blockly.JavaScript.ORDER_ATOMIC),b=StringUtils.format("{0}({1});\n",q.command_setColor,a);return b=StringUtils.format("setColor({0});\n",a)};var p=c;Blockly.Blocks.scene_grid_setcursor={init:function(){this.appendDummyInput().appendField(p.block_setCursor);this.appendValueInput("x").setCheck("Number").appendField(p.block_x);this.appendValueInput("y").setCheck("Number").appendField(p.block_y);this.setInputsInline(!0);
this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(300);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_setcursor=function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,"y",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2});\n",p.command_setCursor,b(c),b(a))};var r=c;Blockly.Blocks.scene_grid_clearmark={init:function(){this.appendDummyInput().appendField(r.block_clearMark);
this.appendValueInput("x").setCheck("Number").appendField(r.block_x);this.appendValueInput("y").setCheck("Number").appendField(r.block_y);this.setInputsInline(!0);this.setPreviousStatement(!0,null);this.setNextStatement(!0,null);this.setColour(210);this.setTooltip("");this.setHelpUrl("http://mauthor.com/doc/en/page/Blockly-Code-Editor")}};Blockly.JavaScript.scene_grid_clearmark=function(a){var c=Blockly.JavaScript.valueToCode(a,"x",Blockly.JavaScript.ORDER_ATOMIC),a=Blockly.JavaScript.valueToCode(a,
"y",Blockly.JavaScript.ORDER_ATOMIC);return StringUtils.format("{0}({1}, {2});\n",r.command_clearMark,b(c),b(a))};d=!0}};g.BlocklyCustomBlocks=g.BlocklyCustomBlocks||{};g.BlocklyCustomBlocks.SceneGrid=g.BlocklyCustomBlocks.SceneGrid||a})(window);(function(g){function a(a,b,d,g){Blockly.Blocks[a]={init:function(){this.appendDummyInput().appendField(d);for(var a=0;a<g.length;a++)this.appendDummyInput().appendField(g[a]).appendField(new Blockly.FieldTextInput(""),a+"#"+g[a]);this.setPreviousStatement(!0,"vfc_action");this.setNextStatement(!0,"vfc_action");this.setColour(290);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript[a]=function(a){for(var d=[],e=0;e<g.length;e++){var i=a.getFieldValue(e+"#"+g[e]);null!=i&&0<i.length?isNaN(i)?
d.push("'"+i+"'"):d.push(i):d.push("''")}return b+"("+d.join(",")+")"+c}}function b(a,b,c,d){Blockly.Blocks[a]={init:function(){this.appendDummyInput().appendField(b);for(var a=Object.keys(c),d=0;d<a.length;d++){var e=a[d];this.appendDummyInput().appendField(c[e]).appendField(new Blockly.FieldTextInput(""),e)}this.appendStatementInput("Action").setCheck("vfc_feedback");this.setOutput(!0,"vfc_event");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript[a]=function(a){for(var b=
{item:"Item:",value:"Value:",score:"Score:",type:"Type:",word:"Word:"},e=Object.keys(b),f={},g=0;g<e.length;g++){var n=e[g];n in c&&(f[n]=a.getFieldValue(n))}for(var a=Blockly.JavaScript.statementToCode(a,"Action"),q="",g=0;g<e.length;g++)if(n=e[g],n in f&&0<f[n].trim().length||n in d)var p=n in f&&0<f[n].trim().length?f[n]:d[n],q=q+(b[n]+p+"\n");return[q+"SCRIPTSTART\n"+a+"SCRIPTEND\n",Blockly.JavaScript.ORDER_ATOMIC]}}var d=function(){},c="&statementSeperator&";d.DEFAULT_LABELS={Visual_Feedback_Creator_source_module:"Source module",
Visual_Feedback_Creator_id:"ID:",Visual_Feedback_Creator_custom_event:"Custom event",Visual_Feedback_Creator_item:"Item:",Visual_Feedback_Creator_value:"Value:",Visual_Feedback_Creator_score:"Score:",Visual_Feedback_Creator_type:"Type:",Visual_Feedback_Creator_word:"Word:",Visual_Feedback_Creator_feedback_module:"Feedback module",Visual_Feedback_Creator_custom_action:"Custom action",Visual_Feedback_Creator_script:"Script:",Visual_Feedback_Creator_show:"Show module",Visual_Feedback_Creator_hide:"Hide module",
Visual_Feedback_Creator_wrong_answer:"Wrong answer",Visual_Feedback_Creator_correct_answer:"Correct answer",Visual_Feedback_Creator_play:"Play",Visual_Feedback_Creator_stop:"Stop",Visual_Feedback_Creator_seek:"Seek",Visual_Feedback_Creator_time:"Time:",Visual_Feedback_Creator_show_subtitles:"Show subtitles",Visual_Feedback_Creator_hide_subtitles:"Hide subtitles",Visual_Feedback_Creator_next:"Next",Visual_Feedback_Creator_prev:"Previous",Visual_Feedback_Creator_jump_to:"Jump to",Visual_Feedback_Creator_number:"Number:",
Visual_Feedback_Creator_playing:"Playing",Visual_Feedback_Creator_finished_playing:"Finished playing",Visual_Feedback_Creator_pause:"Pause",Visual_Feedback_Creator_paused:"Paused",Visual_Feedback_Creator_set_default:"Set default",Visual_Feedback_Creator_change:"Change",Visual_Feedback_Creator_enable:"Enable",Visual_Feedback_Creator_disable:"Disable",Visual_Feedback_Creator_enable_all:"Enable all",Visual_Feedback_Creator_disable_all:"Disable all",Visual_Feedback_Creator_gap_index:"Gap index:",Visual_Feedback_Creator_mark_as_correct:"Mark as correct",
Visual_Feedback_Creator_mark_as_wrong:"Mark as wrong",Visual_Feedback_Creator_mark_as_empty:"Mark as empty",Visual_Feedback_Creator_set_text:"Set text",Visual_Feedback_Creator_reset:"Reset",Visual_Feedback_Creator_index:"Index:",Visual_Feedback_Creator_original_index:"Original index:",Visual_Feedback_Creator_new_index:"New index:",Visual_Feedback_Creator_row:"Row:",Visual_Feedback_Creator_true_false_event:"True False event",Visual_Feedback_Creator_column:"Column:",Visual_Feedback_Creator_selection:"Selection:",
Visual_Feedback_Creator_selected:"Selected",Visual_Feedback_Creator_deselected:"Deselected",Visual_Feedback_Creator_none:"None",Visual_Feedback_Creator_connection_event:"Connection Event",Visual_Feedback_Creator_true:"True",Visual_Feedback_Creator_false:"False",Visual_Feedback_Creator_connected:"Connected",Visual_Feedback_Creator_first_item_id:"First item id:",Visual_Feedback_Creator_second_item_id:"Second item id:",Visual_Feedback_Creator_text_event:"Text Event",Visual_Feedback_Creator_choice_event:"Choice Event",
Visual_Feedback_Creator_source_event:"Source Event",Visual_Feedback_Creator_check:"Check",Visual_Feedback_Creator_uncheck:"Uncheck",Visual_Feedback_Creator_page_loaded:"Page loaded",Visual_Feedback_Creator_hide_answers:"Hide answers",Visual_Feedback_Creator_show_answers:"Show answers",Visual_Feedback_Creator_changed_value:"Changed value",Visual_Feedback_Creator_event:"Event:"};d.addBlocks=function(d){null==d&&(d=this.DEFAULT_LABELS);var f=d;Blockly.Blocks.vfc_source_module={init:function(){this.appendDummyInput().appendField(f.Visual_Feedback_Creator_source_module);
this.appendValueInput("event").setCheck("vfc_event").appendField(f.Visual_Feedback_Creator_id).appendField(new Blockly.FieldTextInput("module1"),"ID");this.setColour(120);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_source_module=function(a){var b=a.getFieldValue("ID"),a=Blockly.JavaScript.valueToCode(a,"event",Blockly.JavaScript.ORDER_ATOMIC);return"\nEVENTSTART\n"+("Source:"+b+"\n")+a+"EVENTEND\n"};var g=d;Blockly.Blocks.vfc_feedback_module={init:function(){this.appendDummyInput().appendField(g.Visual_Feedback_Creator_feedback_module);
this.appendStatementInput("action").setCheck("vfc_action").appendField(g.Visual_Feedback_Creator_id).appendField(new Blockly.FieldTextInput("module2"),"id");this.setPreviousStatement(true,"vfc_feedback");this.setNextStatement(true,"vfc_feedback");this.setColour(20);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_feedback_module=function(a){for(var b=a.getFieldValue("id"),a=Blockly.JavaScript.statementToCode(a,"action").split(c),d="",e=0;e<a.length;e++){var f=a[e].trim();f.length!=
0&&(d=d+("presenter.playerController.getModule('"+b+"')."+f+";\n"))}return d};var j=d;Blockly.Blocks.vfc_custom_event={init:function(){this.appendDummyInput().appendField(j.Visual_Feedback_Creator_custom_event);this.appendDummyInput().appendField(j.Visual_Feedback_Creator_event).appendField(new Blockly.FieldDropdown([[j.Visual_Feedback_Creator_changed_value,"ValueChanged"],[j.Visual_Feedback_Creator_page_loaded,"PageLoaded"],[j.Visual_Feedback_Creator_reset,"Reset"],[j.Visual_Feedback_Creator_show_answers,
"ShowAnswers"],[j.Visual_Feedback_Creator_hide_answers,"HideAnswers"],[j.Visual_Feedback_Creator_check,"Check"],[j.Visual_Feedback_Creator_uncheck,"Uncheck"]]),"eventName");this.appendDummyInput().appendField(j.Visual_Feedback_Creator_item).appendField(new Blockly.FieldTextInput(""),"item");this.appendDummyInput().appendField(j.Visual_Feedback_Creator_value).appendField(new Blockly.FieldTextInput(""),"value");this.appendDummyInput().appendField(j.Visual_Feedback_Creator_score).appendField(new Blockly.FieldTextInput(""),
"score");this.appendDummyInput().appendField(j.Visual_Feedback_Creator_type).appendField(new Blockly.FieldTextInput(""),"type");this.appendDummyInput().appendField(j.Visual_Feedback_Creator_word).appendField(new Blockly.FieldTextInput(""),"word");this.appendStatementInput("Action").setCheck("vfc_feedback");this.setOutput(true,"vfc_event");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_custom_event=function(a){var b=a.getFieldValue("eventName"),c=a.getFieldValue("item"),
d=a.getFieldValue("value"),e=a.getFieldValue("score"),f=a.getFieldValue("type"),g=a.getFieldValue("word"),a=Blockly.JavaScript.statementToCode(a,"Action"),b=""+("Name:"+b+"\n");c.trim().length>0&&(b=b+("Item:"+c+"\n"));d.trim().length>0&&(b=b+("Value:"+d+"\n"));e.trim().length>0&&(b=b+("Score:"+e+"\n"));f.trim().length>0&&(b=b+("Type:"+f+"\n"));g.trim().length>0&&(b=b+("Word:"+g+"\n"));return[b+"SCRIPTSTART\n"+a+"SCRIPTEND\n",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.vfc_custom_action={init:function(){this.appendDummyInput().appendField(j.Visual_Feedback_Creator_custom_action);
this.appendDummyInput().appendField(j.Visual_Feedback_Creator_script).appendField(new Blockly.FieldTextInput(""),"script");this.setPreviousStatement(true,"vfc_action");this.setNextStatement(true,"vfc_action");this.setColour(290);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_custom_action=function(a){return a.getFieldValue("script")+c};Blockly.Blocks.vfc_source_event={init:function(){this.appendDummyInput().appendField(j.Visual_Feedback_Creator_source_event);this.appendDummyInput().appendField(j.Visual_Feedback_Creator_event).appendField(new Blockly.FieldDropdown([[j.Visual_Feedback_Creator_page_loaded,
"PageLoaded"],[j.Visual_Feedback_Creator_reset,"Reset"],[j.Visual_Feedback_Creator_show_answers,"ShowAnswers"],[j.Visual_Feedback_Creator_hide_answers,"HideAnswers"],[j.Visual_Feedback_Creator_check,"Check"],[j.Visual_Feedback_Creator_uncheck,"Uncheck"]]),"eventName");this.appendStatementInput("action").setCheck("vfc_feedback");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_source_event=function(a){var b=a.getFieldValue("eventName"),a=Blockly.JavaScript.statementToCode(a,
"action");return"\nEVENTSTART\n"+("Name:"+b+"\n")+"SCRIPTSTART\n"+a+"SCRIPTEND\nEVENTEND\n"};var h=d;a("vfc_show","show",h.Visual_Feedback_Creator_show,[]);a("vfc_hide","hide",h.Visual_Feedback_Creator_hide,[]);a("vfc_play","play",h.Visual_Feedback_Creator_play,[]);a("vfc_stop","stop",h.Visual_Feedback_Creator_stop,[]);a("vfc_next","next",h.Visual_Feedback_Creator_next,[]);a("vfc_prev","previous",h.Visual_Feedback_Creator_prev,[]);a("vfc_seek","seek",h.Visual_Feedback_Creator_seek,[h.Visual_Feedback_Creator_time]);
a("vfc_show_subs","showSubtitles",h.Visual_Feedback_Creator_show_subtitles,[]);a("vfc_hide_subs","hideSubtitles",h.Visual_Feedback_Creator_hide_subtitles,[]);a("vfc_jump_to","jumpTo",h.Visual_Feedback_Creator_jump_to,[h.Visual_Feedback_Creator_number]);a("vfc_jump_to_id","jumpToID",h.Visual_Feedback_Creator_jump_to,[h.Visual_Feedback_Creator_id]);b("vfc_video_ended",h.Visual_Feedback_Creator_finished_playing,{item:h.Visual_Feedback_Creator_number},{value:"ended"});b("vfc_video_playing",h.Visual_Feedback_Creator_playing,
{},{value:"playing"});h=d;a("vfc_pause","pause",h.Visual_Feedback_Creator_pause,[]);b("vfc_audio_ended",h.Visual_Feedback_Creator_finished_playing,{},{item:"end"});b("vfc_audio_paused",h.Visual_Feedback_Creator_paused,{},{value:"pause"});h=d;a("vfc_feedback_set_def","setDefaultResponse",h.Visual_Feedback_Creator_set_default,[]);a("vfc_feedback_change","change",h.Visual_Feedback_Creator_change,[h.Visual_Feedback_Creator_id]);h=d;a("vfc_enable_gap","enableGap",h.Visual_Feedback_Creator_enable,[h.Visual_Feedback_Creator_gap_index]);
a("vfc_enable_gaps","enableAllGaps",h.Visual_Feedback_Creator_enable_all,[]);a("vfc_disable_gap","disableGap",h.Visual_Feedback_Creator_disable,[h.Visual_Feedback_Creator_gap_index]);a("vfc_disable_gaps","disableAllGaps",h.Visual_Feedback_Creator_disable_all,[]);a("vfc_text_mark_correct","markGapAsCorrect",h.Visual_Feedback_Creator_mark_as_correct,[h.Visual_Feedback_Creator_gap_index]);a("vfc_text_mark_wrong","markGapAsWrong",h.Visual_Feedback_Creator_mark_as_wrong,[h.Visual_Feedback_Creator_gap_index]);
a("vfc_text_mark_empty","markGapAsEmpty",h.Visual_Feedback_Creator_mark_as_empty,[h.Visual_Feedback_Creator_gap_index]);a("vfc_text_set_text","setText",h.Visual_Feedback_Creator_set_text,[h.Visual_Feedback_Creator_value]);b("vfc_text_correct_gap",h.Visual_Feedback_Creator_correct_answer,{item:h.Visual_Feedback_Creator_gap_index},{score:1});b("vfc_text_wrong_gap",h.Visual_Feedback_Creator_wrong_answer,{item:h.Visual_Feedback_Creator_gap_index},{score:0});b("vfc_text_event",h.Visual_Feedback_Creator_text_event,
{item:h.Visual_Feedback_Creator_gap_index,value:h.Visual_Feedback_Creator_value,score:h.Visual_Feedback_Creator_score},{});var l=d;a("vfc_disable","disable",l.Visual_Feedback_Creator_disable,[]);a("vfc_enable","enable",l.Visual_Feedback_Creator_enable,[]);a("vfc_reset","reset",l.Visual_Feedback_Creator_reset,[]);a("vfc_choice_mark_correct","markOptionAsCorrect",l.Visual_Feedback_Creator_mark_as_correct,[l.Visual_Feedback_Creator_index]);a("vfc_choice_mark_wrong","markOptionAsWrong",l.Visual_Feedback_Creator_mark_as_wrong,
[l.Visual_Feedback_Creator_index]);a("vfc_choice_mark_empty","markOptionAsEmpty",l.Visual_Feedback_Creator_mark_as_empty,[l.Visual_Feedback_Creator_index]);Blockly.Blocks.vfc_choice_event={init:function(){this.appendDummyInput().appendField(l.Visual_Feedback_Creator_choice_event);this.appendDummyInput().appendField(l.Visual_Feedback_Creator_id).appendField(new Blockly.FieldTextInput(""),"id");this.appendDummyInput().appendField(l.Visual_Feedback_Creator_selection).appendField(new Blockly.FieldDropdown([[l.Visual_Feedback_Creator_none,
"-1"],[l.Visual_Feedback_Creator_selected,"1"],[l.Visual_Feedback_Creator_deselected,"0"]]),"selection");this.appendDummyInput().appendField(l.Visual_Feedback_Creator_score).appendField(new Blockly.FieldDropdown([[l.Visual_Feedback_Creator_none,"-1"],[l.Visual_Feedback_Creator_correct_answer,"1"],[l.Visual_Feedback_Creator_wrong_answer,"0"]]),"score");this.appendStatementInput("action").setCheck("vfc_feedback");this.setOutput(true,"vfc_event");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};
Blockly.JavaScript.vfc_choice_event=function(a){var b=a.getFieldValue("id"),c=a.getFieldValue("selection"),d=a.getFieldValue("score"),a=Blockly.JavaScript.statementToCode(a,"action"),c=Number(c),d=Number(d),e="";b.length>0&&(e=e+("Item:"+b+"\n"));c>-1&&(e=e+("Value:"+c+"\n"));d>-1&&(e=e+("Score:"+d+"\n"));return[e+"SCRIPTSTART\n"+a+"SCRIPTEND\n",Blockly.JavaScript.ORDER_ATOMIC]};var m=d;b("vfc_connection_new_correct",m.Visual_Feedback_Creator_correct_answer,{},{score:1,value:1});b("vfc_connection_new_wrong",
m.Visual_Feedback_Creator_wrong_answer,{},{score:0,value:1});Blockly.Blocks.vfc_connection_event={init:function(){this.appendDummyInput().appendField(m.Visual_Feedback_Creator_connection_event);this.appendDummyInput().appendField(m.Visual_Feedback_Creator_first_item_id).appendField(new Blockly.FieldTextInput(""),"first");this.appendDummyInput().appendField(m.Visual_Feedback_Creator_second_item_id).appendField(new Blockly.FieldTextInput(""),"second");this.appendDummyInput().appendField(m.Visual_Feedback_Creator_connected).appendField(new Blockly.FieldDropdown([[m.Visual_Feedback_Creator_none,
"-1"],[m.Visual_Feedback_Creator_true,"1"],[m.Visual_Feedback_Creator_false,"0"]]),"connection");this.appendDummyInput().appendField(m.Visual_Feedback_Creator_score).appendField(new Blockly.FieldDropdown([[m.Visual_Feedback_Creator_none,"-1"],[m.Visual_Feedback_Creator_correct_answer,"1"],[m.Visual_Feedback_Creator_wrong_answer,"0"]]),"score");this.appendStatementInput("action").setCheck("vfc_feedback");this.setOutput(true,"vfc_event");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};
Blockly.JavaScript.vfc_connection_event=function(a){var b=a.getFieldValue("first"),c=a.getFieldValue("second"),d=a.getFieldValue("connection"),e=a.getFieldValue("score"),a=Blockly.JavaScript.statementToCode(a,"action"),d=Number(d),e=Number(e),f="";b.length>0&&c.length>0&&(f=f+("Item:"+b+"-"+c+"\n"));d>-1&&(f=f+("Value:"+d+"\n"));e>-1&&(f=f+("Score:"+e+"\n"));return[f+"SCRIPTSTART\n"+a+"SCRIPTEND\n",Blockly.JavaScript.ORDER_ATOMIC]};b("vfc_ordering_event",d.Visual_Feedback_Creator_correct_answer,{item:d.Visual_Feedback_Creator_original_index,
value:d.Visual_Feedback_Creator_new_index,score:d.Visual_Feedback_Creator_score},{});var k=d;b("vfc_true_false_correct",k.Visual_Feedback_Creator_correct_answer,{},{item:"all"});Blockly.Blocks.vfc_true_false_correct_row={init:function(){this.appendDummyInput().appendField(k.Visual_Feedback_Creator_correct_answer);this.appendDummyInput().appendField(k.Visual_Feedback_Creator_row).appendField(new Blockly.FieldNumber(1),"row");this.appendStatementInput("action").setCheck("vfc_feedback");this.setOutput(true,
"vfc_event");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_true_false_correct_row=function(a){var b=a.getFieldValue("row"),a=Blockly.JavaScript.statementToCode(a,"action");return["Item:"+b+"-all\nSCRIPTSTART\n"+a+"SCRIPTEND\n",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.vfc_true_false_event={init:function(){this.appendDummyInput().appendField(k.Visual_Feedback_Creator_true_false_event);this.appendDummyInput().appendField(k.Visual_Feedback_Creator_row).appendField(new Blockly.FieldNumber(0),
"question");this.appendDummyInput().appendField(k.Visual_Feedback_Creator_column).appendField(new Blockly.FieldNumber(0),"answer");this.appendDummyInput().appendField(k.Visual_Feedback_Creator_selection).appendField(new Blockly.FieldDropdown([[k.Visual_Feedback_Creator_none,"-1"],[k.Visual_Feedback_Creator_selected,"1"],[k.Visual_Feedback_Creator_deselected,"0"]]),"selection");this.appendDummyInput().appendField(k.Visual_Feedback_Creator_score).appendField(new Blockly.FieldDropdown([[k.Visual_Feedback_Creator_none,
"-1"],[k.Visual_Feedback_Creator_correct_answer,"1"],[k.Visual_Feedback_Creator_wrong_answer,"0"]]),"score");this.appendStatementInput("action").setCheck("vfc_feedback");this.setOutput(true,"vfc_event");this.setColour(230);this.setTooltip("");this.setHelpUrl("")}};Blockly.JavaScript.vfc_true_false_event=function(a){var b=a.getFieldValue("question"),c=a.getFieldValue("answer"),d=a.getFieldValue("selection"),e=a.getFieldValue("score"),a=Blockly.JavaScript.statementToCode(a,"action"),d=Number(d),e=Number(e),
f="";b>0&&c>0&&(f=f+("Item:"+b+"-"+c+"\n"));d>-1&&(f=f+("Value:"+d+"\n"));e>-1&&(f=f+("Score:"+e+"\n"));return[f+"SCRIPTSTART\n"+a+"SCRIPTEND\n",Blockly.JavaScript.ORDER_ATOMIC]}};g.BlocklyCustomBlocks=g.BlocklyCustomBlocks||{};g.BlocklyCustomBlocks.AGC=g.BlocklyCustomBlocks.AGC||d})(window);
/**
 * Player Addons Commons library
 * @version 4.4.0
 * Components:
 * - Model Validation Utils
 * - DOM Operations
 * - Statefull Addon Object
 * - Draggable Droppable Object
 * - States Serialization
 * - Watermark
 * - Commands
 * - Image Viewer (partial)
 * - Helpers
 * - Mobile Utils
 * - String Utils
 * - Internationalization
 * - Text Parser Proxy
 * - Loaded Promise
 * - Events Utils
 * - Model Error Utils
 * - Blockly Custom Scene Blocks
 * - Keyboard Navigation Controller
 * - SRT Parser
 * - Audio Context Singleton
 * - Open Activities Utils
 * - Positioning Utils
 */